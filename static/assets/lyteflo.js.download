const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lyteflo6.js","assets/lyteflo4.js","assets/lyteflo2.js","assets/lyteflo3.js","assets/index.js","assets/lyteflo10.js","assets/lyteflo5.js","assets/lyteflo7.js","assets/lyteflo8.js","assets/lyteflo9.js"])))=>i.map(i=>d[i]);
import{z as Zs,c as z,t as be,x as he,s as ts,e as we,f as i,Z as ct,N as Et,h as Xs,g as Js,r as nt,i as gt,j as Ye,m as hn,E as Qs,n as ei,a as ti,R as Je,p as D,o as mt,q as Pt,w as bt,Y as Pn,y as ni,A as si,B as De,_ as ii,C as ai,v as J,M as ri,D as Gt,F as lt,T as ns,G as st,S as oi,H as li,J as L,K as Te,L as kt,O as Be,P as ci,Q as di,U as Bt,W as ui,X as it,$ as ss,a0 as fi,a1 as _i,a2 as is,a3 as pi,a4 as gi,a5 as mi,a6 as as,a7 as vi,a8 as hi,a9 as Ei,aa as zt,ab as yi,ac as bi,ad as Ni,ae as Ci,af as Ae,ag as wi,ah as Si,ai as kn,aj as Ii,ak as ut,al as Oi,am as Ai,an as Li,ao as Ti,ap as rs,aq as Ri,ar as os,as as St,at as It,au as xi,av as ls,aw as Pi,ax as Vn,ay as Mn,az as ki,aA as Vi,aB as Mi,aC as Di,aD as Gi,aE as Bi}from"./lyteflo4.js";import{c as Hi,K as Nt,x as Ct,T as Y,A as X,y as x,b as Qe,_ as B,R as En,q as Fe,e as $i,d as T,$ as yn,k as Ce,z as Ht,P as bn,D as Nn,F as Fi,f as cs}from"./lyteflo2.js";import{c as ds,u as us,g as Ee,a as Q,s as Dn,b as Gn,l as Wi,P as ge,d as Ui,e as $t,f as Yt,_ as Ft,h as Vt,i as We,j as ji,k as fs,m as zi,n as _s,o as ps,p as Yi,q as qi}from"./index.js";import{i as Wt,B as Ki,a as Zi,b as Xi,c as Ji,u as _e,t as Qi,T as gs}from"./lyteflo3.js";import{t as ea}from"./lyteflo5.js";const j={VDP:{LYTEFLO_VIEW:"vdp.lyteflo_view",LYTEFLO_VIEW_ERROR:"vdp.lyteflo_view_error",BATTERY_REPORT_BADGE:{CTA_OPEN:"vdp.battery_report_badge.cta.open"},SHARE:{OPEN:"vdp.share.open",COPIED:"vdp.share.copied",OPENED:"vdp.share.opened"},VEHICLE_SAVINGS:{ZIP:{OPEN:"vdp.vehicle_savings.zip.open",CLOSE:"vdp.vehicle_savings.zip.close",SAVE:"vdp.vehicle_savings.zip.save"},PII:{SUBMIT:"vdp.vehicle_savings.pii.submit",CTA_OPEN:"vdp.vehicle_savings.pii.cta.open",SUCCESS:{CLEAR_STORAGE:"vdp.vehicle_savings.pii.success.clear_storage",CTA_CLOSE:"vdp.vehicle_savings.pii.success.cta.close"},report:{SavingsHub:{OPEN:"vdp.vehicle_savings.pii.report.savings_hub.open",CLOSE:"vdp.vehicle_savings.pii.report.savings_hub.close",SUBMIT:"vdp.vehicle_savings.pii.report.savings_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.report.savings_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.report.savings_hub.engage.email"},OwnershipHub:{OPEN:"vdp.vehicle_savings.pii.report.ownership_hub.open",CLOSE:"vdp.vehicle_savings.pii.report.ownership_hub.close",SUBMIT:"vdp.vehicle_savings.pii.report.ownership_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.report.ownership_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.report.ownership_hub.engage.email"},IncentiveHub:{OPEN:"vdp.vehicle_savings.pii.report.incentive_hub.open",CLOSE:"vdp.vehicle_savings.pii.report.incentive_hub.close",SUBMIT:"vdp.vehicle_savings.pii.report.incentive_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.report.incentive_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.report.incentive_hub.engage.email"},IncentiveBanner:{OPEN:"vdp.vehicle_savings.pii.report.incentive_banner.open",CLOSE:"vdp.vehicle_savings.pii.report.incentive_banner.close",SUBMIT:"vdp.vehicle_savings.pii.report.incentive_banner.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.report.incentive_banner.engage.name"}},eligibility:{SavingsHub:{OPEN:"vdp.vehicle_savings.pii.eligibility.savings_hub.open",CLOSE:"vdp.vehicle_savings.pii.eligibility.savings_hub.close",SUBMIT:"vdp.vehicle_savings.pii.eligibility.savings_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.eligibility.savings_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.eligibility.savings_hub.engage.email"},OwnershipHub:{OPEN:"vdp.vehicle_savings.pii.eligibility.ownership_hub.open",CLOSE:"vdp.vehicle_savings.pii.eligibility.ownership_hub.close",SUBMIT:"vdp.vehicle_savings.pii.eligibility.ownership_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.eligibility.ownership_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.eligibility.ownership_hub.engage.email"},IncentiveHub:{OPEN:"vdp.vehicle_savings.pii.eligibility.incentive_hub.open",CLOSE:"vdp.vehicle_savings.pii.eligibility.incentive_hub.close",SUBMIT:"vdp.vehicle_savings.pii.eligibility.incentive_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.eligibility.incentive_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.eligibility.incentive_hub.engage.email"},IncentiveBanner:{OPEN:"vdp.vehicle_savings.pii.eligibility.incentive_banner.open",CLOSE:"vdp.vehicle_savings.pii.eligibility.incentive_banner.close",SUBMIT:"vdp.vehicle_savings.pii.eligibility.incentive_banner.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.eligibility.incentive_banner.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.eligibility.incentive_banner.engage.email"}},ev_expert:{SavingsHub:{OPEN:"vdp.vehicle_savings.pii.ev_expert.savings_hub.open",CLOSE:"vdp.vehicle_savings.pii.ev_expert.savings_hub.close",SUBMIT:"vdp.vehicle_savings.pii.ev_expert.savings_hub.submit",CLICK_TO_CALL:"vdp.vehicle_savings.pii.ev_expert.savings_hub.click_to_call",ENGAGE_NAME:"vdp.vehicle_savings.pii.ev_expert.savings_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.ev_expert.savings_hub.engage.email"},OwnershipHub:{OPEN:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.open",CLOSE:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.close",SUBMIT:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.submit",CLICK_TO_CALL:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.click_to_call",ENGAGE_NAME:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.ev_expert.ownership_hub.engage.email"},IncentiveHub:{OPEN:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.open",CLOSE:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.close",SUBMIT:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.submit",CLICK_TO_CALL:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.click_to_call",ENGAGE_NAME:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.ev_expert.incentive_hub.engage.email"},IncentiveBanner:{OPEN:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.open",CLOSE:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.close",SUBMIT:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.submit",CLICK_TO_CALL:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.click_to_call",ENGAGE_NAME:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.ev_expert.incentive_banner.engage.email"}},battery_report:{SavingsHub:{OPEN:"vdp.vehicle_savings.pii.battery_report.savings_hub.open",CLOSE:"vdp.vehicle_savings.pii.battery_report.savings_hub.close",SUBMIT:"vdp.vehicle_savings.pii.battery_report.savings_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.battery_report.savings_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.battery_report.savings_hub.engage.email",ENGAGE_PHONE:"vdp.vehicle_savings.pii.battery_report.savings_hub.engage.phone"},OwnershipHub:{OPEN:"vdp.vehicle_savings.pii.battery_report.ownership_hub.open",CLOSE:"vdp.vehicle_savings.pii.battery_report.ownership_hub.close",SUBMIT:"vdp.vehicle_savings.pii.battery_report.ownership_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.battery_report.ownership_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.battery_report.ownership_hub.engage.email",ENGAGE_PHONE:"vdp.vehicle_savings.pii.battery_report.ownership_hub.engage.phone"},IncentiveHub:{OPEN:"vdp.vehicle_savings.pii.battery_report.incentive_hub.open",CLOSE:"vdp.vehicle_savings.pii.battery_report.incentive_hub.close",SUBMIT:"vdp.vehicle_savings.pii.battery_report.incentive_hub.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.battery_report.incentive_hub.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.battery_report.incentive_hub.engage.email",ENGAGE_PHONE:"vdp.vehicle_savings.pii.battery_report.incentive_hub.engage.phone"},IncentiveBanner:{OPEN:"vdp.vehicle_savings.pii.battery_report.incentive_banner.open",CLOSE:"vdp.vehicle_savings.pii.battery_report.incentive_banner.close",SUBMIT:"vdp.vehicle_savings.pii.battery_report.incentive_banner.submit",ENGAGE_NAME:"vdp.vehicle_savings.pii.battery_report.incentive_banner.engage.name",ENGAGE_EMAIL:"vdp.vehicle_savings.pii.battery_report.incentive_banner.engage.email",ENGAGE_PHONE:"vdp.vehicle_savings.pii.battery_report.incentive_banner.engage.phone"}}},OWNERSHIP_YEARS:{INCREASE:"vdp.vehicle_savings.ownership_years.increase",DECREASE:"vdp.vehicle_savings.ownership_years.decrease"},COMPARISON_SELECTOR:{MAKE_SELECT:"vdp.vehicle_savings.comparison_selector.make_select",MODEL_SELECT:"vdp.vehicle_savings.comparison_selector.model_select",TRIM_SELECT:"vdp.vehicle_savings.comparison_selector.trim_select",YEAR_SELECT:"vdp.vehicle_savings.comparison_selector.year_select",CTA_CLICK:"vdp.vehicle_savings.comparison_selector.cta_click",OPEN:"vdp.vehicle_savings.comparison_selector.open",CLOSE:"vdp.vehicle_savings.comparison_selector.close",SAVE:"vdp.vehicle_savings.comparison_selector.save"},INCENTIVES:{TOOLTIP:{OPEN:"vdp.vehicle_savings.incentives.tooltip.open",CLOSE:"vdp.vehicle_savings.incentives.tooltip.close"},COLLAPSIBLE:{OPEN:"vdp.vehicle_savings.incentives.collapsible.open",CLOSE:"vdp.vehicle_savings.incentives.collapsible.close"},CTA_OPEN:"vdp.vehicle_savings.incentives.cta.open",SELECTED:"vdp.vehicle_savings.incentives.selected_incentive",UNSELECTED:"vdp.vehicle_savings.incentives.unselected_incentive"},TIMELINE:{SELECTED:{monthly:"vdp.vehicle_savings.timeline.selected.monthly",annual:"vdp.vehicle_savings.timeline.selected.annual",total:"vdp.vehicle_savings.timeline.selected.total"}}},OWNERSHIP:{TOOLTIP:{OPEN:"vdp.ownership.tooltip.open",CLOSE:"vdp.ownership.tooltip.close"},COLLAPSIBLE:{OPEN:"vdp.ownership.collapsible.open",CLOSE:"vdp.ownership.collapsible.close"},CTA_OPEN:"vdp.ownership.cta.open",MILEAGE:{SELECTED:{daily:"vdp.ownership.mileage.selected.daily",annual:"vdp.ownership.mileage.selected.annual"},INPUT_BLUR:"vdp.ownership.mileage.input.blur"},GAS:{COST_INPUT_BLUR:"vdp.ownership.gas.cost.input.blur",EFFICIENCY_INPUT_BLUR:"vdp.ownership.gas.efficiency.input.blur"},ELECTRICITY:{COST_INPUT_BLUR:"vdp.ownership.electricity.cost.input.blur",CHARGE_AT_HOME_TOGGLE_ON:"vdp.ownership.electricity.charge_at_home.toggle.on",CHARGE_AT_HOME_TOGGLE_OFF:"vdp.ownership.electricity.charge_at_home.toggle.off",CHARGE_AT_HOME_TOOLTIP_OPEN:"vdp.ownership.electricity.charge_at_home.tooltip.open"},COMPARISON:{SHOW_INPUTS:"vdp.ownership.comparison.show_inputs",SELECTED:{ownership:"vdp.ownership.comparison.selected.total",fuel:"vdp.ownership.comparison.selected.fuel",maintenance:"vdp.ownership.comparison.selected.maintenance"}},INPUTS:{SHOW_CHART:"vdp.ownership.inputs.show_chart"},COMPARISON_SELECTOR:{CTA_CLICK:"vdp.ownership.comparison_selector.cta_click",OPEN:"vdp.ownership.comparison_selector.open",CLOSE:"vdp.ownership.comparison_selector.close"}},INCENTIVES:{SELECTED:"vdp.incentives.selected",UNSELECTED:"vdp.incentives.unselected"},CHARGE_MAP:{CTA_OPEN:"vdp.charge_map.cta.open",WITHIN_RANGE:{HOVER_OPEN:"vdp.charge_map.within_range.hover.open",HOVER_CLOSE:"vdp.charge_map.within_range.hover.close"},ONLY_L3:{ON:"vdp.charge_map.only_l3.on",OFF:"vdp.charge_map.only_l3.off"},ROUND_TRIP:{ON:"vdp.charge_map.round_trip.on",OFF:"vdp.charge_map.round_trip.off"},STATION_SELECTED:"vdp.charge_map.station_selected",ADDRESS_CHANGED:"vdp.charge_map.address_changed"},EV_ATTRIBUTES:{ATTRIBUTE:{TOOLTIP_OPEN:"vdp.ev_attributes.attribute.tooltip.open"},DISCLAIMER:{TOOLTIP_OPEN:"vdp.ev_attributes.disclaimer.tooltip.open"}},MODAL:{OwnershipHub:{CLOSE:"vdp.ownership.modal.close"},IncentiveHub:{CLOSE:"vdp.incentives.modal.close"},ChargeMap:{CLOSE:"vdp.charge_map.modal.close"},BatteryReportBadge:{CLOSE:"vdp.battery_report_badge.modal.close"}}},SRP:{SAVINGS:{CTA_CLICK:"srp.savings.cta.click"},LYTEFLO_VIEW:"srp.lyteflo_view",LYTEFLO_VIEW_ERROR:"srp.lyteflo_view_error",SHARE:{OPEN:"srp.share.open",COPIED:"srp.share.copied",OPENED:"srp.share.opened"}},COMPONENT:{CAROUSEL:{NEXT:"component.carousel.next",PREVIOUS:"component.carousel.previous"}}},ta=(e,t)=>{const r=Object.keys(j.VDP).some(a=>a in t)?"vdp":"srp";return e?t?.SHARE?.OPENED||`${r}.share.opened`:t?.LYTEFLO_VIEW||`${r}.lyteflo_view`},na={max_value:"number",not_applicable:"boolean"},sa=e=>Zs(e,na),Bn={USE_CUSTOM_PLACEMENT:"useCustomPlacement",USE_CUSTOM_MOBILE_PLACEMENT:"useCustomMobilePlacement"},ms=e=>e?.find(t=>t.name===z.SRP_SAVINGS)?.enabled;Wt.use(Ki).use(Zi).use(Xi).init({supportedLngs:Object.values(be),fallbackLng:be.EN,defaultNS:"widget",ns:["widget","shared"],react:{useSuspense:!1},backend:{loadPath:(e,t)=>{const n=Array.isArray(e)?e[0]:e,s=Array.isArray(t)?t[0]:t,r="https://cdn-dev.lyteflo.tech/saleshub";return s==="shared"?`${r}/locales/${n}/shared.json`:`${r}/locales/${n}.json`},requestOptions:{retry:3,timeout:5e3}},interpolation:{escapeValue:!1},detection:{order:["localStorage"],lookupLocalStorage:"lf_language",caches:["localStorage"]}});function ia(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(r))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,void 0)),removeItem:r=>n.removeItem(r)}}const on=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return on(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return on(s)(n)}}}},aa=(e,t)=>(n,s,r)=>{let a={storage:ia(()=>localStorage),partialize:u=>u,version:0,merge:(u,v)=>({...v,...u}),...t},o=!1;const l=new Set,c=new Set;let d=a.storage;if(!d)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...u)},s,r);const p=()=>{const u=a.partialize({...s()});return d.setItem(a.name,{state:u,version:a.version})},_=r.setState;r.setState=(u,v)=>{_(u,v),p()};const f=e((...u)=>{n(...u),p()},s,r);r.getInitialState=()=>f;let m;const C=()=>{var u,v;if(!d)return;o=!1,l.forEach(E=>{var w;return E((w=s())!=null?w:f)});const g=((v=a.onRehydrateStorage)==null?void 0:v.call(a,(u=s())!=null?u:f))||void 0;return on(d.getItem.bind(d))(a.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==a.version){if(a.migrate){const w=a.migrate(E.state,E.version);return w instanceof Promise?w.then(b=>[!0,b]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var w;const[b,y]=E;if(m=a.merge(y,(w=s())!=null?w:f),n(m,!0),b)return p()}).then(()=>{g?.(m,void 0),m=s(),o=!0,c.forEach(E=>E(m))}).catch(E=>{g?.(void 0,E)})};return r.persist={setOptions:u=>{a={...a,...u},u.storage&&(d=u.storage)},clearStorage:()=>{d?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>o,onHydrate:u=>(l.add(u),()=>{l.delete(u)}),onFinishHydration:u=>(c.add(u),()=>{c.delete(u)})},a.skipHydration||C(),m||f},ra=aa;ds()(ra(e=>({isAuthenticated:!1,setIsAuthenticated:t=>{e({isAuthenticated:t})}}),{name:"lf_auth_store",partialize:e=>({isAuthenticated:e.isAuthenticated})}));var qt={exports:{}},Kt={};const oa=Ji(Hi);var Hn;function la(){if(Hn)return Kt;Hn=1;var e=oa;function t(_,f){return _===f&&(_!==0||1/_===1/f)||_!==_&&f!==f}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(_,f){var m=f(),C=s({inst:{value:m,getSnapshot:f}}),u=C[0].inst,v=C[1];return a(function(){u.value=m,u.getSnapshot=f,c(u)&&v({inst:u})},[_,m,f]),r(function(){return c(u)&&v({inst:u}),_(function(){c(u)&&v({inst:u})})},[_]),o(m),m}function c(_){var f=_.getSnapshot;_=_.value;try{var m=f();return!n(_,m)}catch{return!0}}function d(_,f){return f()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Kt.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Kt}var $n;function ca(){return $n||($n=1,qt.exports=la()),qt.exports}var da=ca();const vs=0,hs=1,Es=2,Fn=3;var Wn=Object.prototype.hasOwnProperty;function ln(e,t){var n,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&ln(e[s],t[s]););return s===-1}if(!n||typeof e=="object"){s=0;for(n in e)if(Wn.call(e,n)&&++s&&!Wn.call(t,n)||!(n in t)||!ln(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!==e&&t!==t}const ze=new WeakMap,et=()=>{},Ne=et(),Mt=Object,ee=e=>e===Ne,Ge=e=>typeof e=="function",qe=(e,t)=>({...e,...t}),ys=e=>Ge(e.then),Zt={},Ot={},Cn="undefined",wt=typeof window!=Cn,cn=typeof document!=Cn,ua=wt&&"Deno"in window,fa=()=>wt&&typeof window.requestAnimationFrame!=Cn,bs=(e,t)=>{const n=ze.get(e);return[()=>!ee(t)&&e.get(t)||Zt,s=>{if(!ee(t)){const r=e.get(t);t in Ot||(Ot[t]=r),n[5](t,qe(r,s),r||Zt)}},n[6],()=>!ee(t)&&t in Ot?Ot[t]:!ee(t)&&e.get(t)||Zt]};let dn=!0;const _a=()=>dn,[un,fn]=wt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[et,et],pa=()=>{const e=cn&&document.visibilityState;return ee(e)||e!=="hidden"},ga=e=>(cn&&document.addEventListener("visibilitychange",e),un("focus",e),()=>{cn&&document.removeEventListener("visibilitychange",e),fn("focus",e)}),ma=e=>{const t=()=>{dn=!0,e()},n=()=>{dn=!1};return un("online",t),un("offline",n),()=>{fn("online",t),fn("offline",n)}},va={isOnline:_a,isVisible:pa},ha={initFocus:ga,initReconnect:ma},Un=!En.useId,yt=!wt||ua,Ea=e=>fa()?window.requestAnimationFrame(e):setTimeout(e,1),Tt=yt?x:Qe,Xt=typeof navigator<"u"&&navigator.connection,jn=!yt&&Xt&&(["slow-2g","2g"].includes(Xt.effectiveType)||Xt.saveData),At=new WeakMap,Jt=(e,t)=>Mt.prototype.toString.call(e)===`[object ${t}]`;let ya=0;const _n=e=>{const t=typeof e,n=Jt(e,"Date"),s=Jt(e,"RegExp"),r=Jt(e,"Object");let a,o;if(Mt(e)===e&&!n&&!s){if(a=At.get(e),a)return a;if(a=++ya+"~",At.set(e,a),Array.isArray(e)){for(a="@",o=0;o<e.length;o++)a+=_n(e[o])+",";At.set(e,a)}if(r){a="#";const l=Mt.keys(e).sort();for(;!ee(o=l.pop());)ee(e[o])||(a+=o+":"+_n(e[o])+",");At.set(e,a)}}else a=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return a},wn=e=>{if(Ge(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?_n(e):"",[e,t]};let ba=0;const pn=()=>++ba;async function Ns(...e){const[t,n,s,r]=e,a=qe({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let o=a.populateCache;const l=a.rollbackOnError;let c=a.optimisticData;const d=f=>typeof l=="function"?l(f):l!==!1,p=a.throwOnError;if(Ge(n)){const f=n,m=[],C=t.keys();for(const u of C)!/^\$(inf|sub)\$/.test(u)&&f(t.get(u)._k)&&m.push(u);return Promise.all(m.map(_))}return _(n);async function _(f){const[m]=wn(f);if(!m)return;const[C,u]=bs(t,m),[v,g,E,w]=ze.get(t),b=()=>{const I=v[m];return(Ge(a.revalidate)?a.revalidate(C().data,f):a.revalidate!==!1)&&(delete E[m],delete w[m],I&&I[0])?I[0](Es).then(()=>C().data):C().data};if(e.length<3)return b();let y=s,S;const h=pn();g[m]=[h,0];const N=!ee(c),O=C(),P=O.data,R=O._c,q=ee(R)?P:R;if(N&&(c=Ge(c)?c(q,P):c,u({data:c,_c:q})),Ge(y))try{y=y(q)}catch(I){S=I}if(y&&ys(y))if(y=await y.catch(I=>{S=I}),h!==g[m][0]){if(S)throw S;return y}else S&&N&&d(S)&&(o=!0,u({data:q,_c:Ne}));if(o&&!S)if(Ge(o)){const I=o(y,q);u({data:I,error:Ne,_c:Ne})}else u({data:y,error:Ne,_c:Ne});if(g[m][1]=pn(),Promise.resolve(b()).then(()=>{u({_c:Ne})}),S){if(p)throw S;return}return y}}const zn=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Cs=(e,t)=>{if(!ze.has(e)){const n=qe(ha,t),s=Object.create(null),r=Ns.bind(Ne,e);let a=et;const o=Object.create(null),l=(p,_)=>{const f=o[p]||[];return o[p]=f,f.push(_),()=>f.splice(f.indexOf(_),1)},c=(p,_,f)=>{e.set(p,_);const m=o[p];if(m)for(const C of m)C(_,f)},d=()=>{if(!ze.has(e)&&(ze.set(e,[s,Object.create(null),Object.create(null),Object.create(null),r,c,l]),!yt)){const p=n.initFocus(setTimeout.bind(Ne,zn.bind(Ne,s,vs))),_=n.initReconnect(setTimeout.bind(Ne,zn.bind(Ne,s,hs)));a=()=>{p&&p(),_&&_(),ze.delete(e)}}};return d(),[e,r,d,a]}return[e,ze.get(e)[4]]},Na=(e,t,n,s,r)=>{const a=n.errorRetryCount,o=r.retryCount,l=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!ee(a)&&o>a||setTimeout(s,l,r)},Ca=ln,[Sn,wa]=Cs(new Map),ws=qe({onLoadingSlow:et,onSuccess:et,onError:et,onErrorRetry:Na,onDiscarded:et,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:jn?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:jn?5e3:3e3,compare:Ca,isPaused:()=>!1,cache:Sn,mutate:wa,fallback:{}},va),Ss=(e,t)=>{const n=qe(e,t);if(t){const{use:s,fallback:r}=e,{use:a,fallback:o}=t;s&&a&&(n.use=s.concat(a)),r&&o&&(n.fallback=qe(r,o))}return n},gn=Nt({}),Sa=e=>{const{value:t}=e,n=Ct(gn),s=Ge(t),r=Y(()=>s?t(n):t,[s,n,t]),a=Y(()=>s?r:Ss(n,r),[s,n,r]),o=r&&r.provider,l=X(Ne);o&&!l.current&&(l.current=Cs(o(a.cache||Sn),r));const c=l.current;return c&&(a.cache=c[0],a.mutate=c[1]),Tt(()=>{if(c)return c[2]&&c[2](),c[3]},[]),B(gn.Provider,qe(e,{value:a}))},Ia="$inf$",Is=wt&&window.__SWR_DEVTOOLS_USE__,Oa=Is?window.__SWR_DEVTOOLS_USE__:[],Aa=()=>{Is&&(window.__SWR_DEVTOOLS_REACT__=En)},La=e=>Ge(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Ta=()=>qe(ws,Ct(gn)),Ra=e=>(t,n,s)=>e(t,n&&((...a)=>{const[o]=wn(t),[,,,l]=ze.get(Sn);if(o.startsWith(Ia))return n(...a);const c=l[o];return ee(c)?n(...a):(delete l[o],c)}),s),xa=Oa.concat(Ra),Pa=e=>function(...n){const s=Ta(),[r,a,o]=La(n),l=Ss(s,o);let c=e;const{use:d}=l,p=(d||[]).concat(xa);for(let _=p.length;_--;)c=p[_](c);return c(r,a||l.fetcher||null,l)},ka=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r>=0&&(s[r]=s[s.length-1],s.pop())}};Aa();const Qt=En.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),en={dedupe:!0},Va=(e,t,n)=>{const{cache:s,compare:r,suspense:a,fallbackData:o,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:d,refreshWhenHidden:p,refreshWhenOffline:_,keepPreviousData:f}=n,[m,C,u,v]=ze.get(s),[g,E]=wn(e),w=X(!1),b=X(!1),y=X(g),S=X(t),h=X(n),N=()=>h.current,O=()=>N().isVisible()&&N().isOnline(),[P,R,q,I]=bs(s,g),M=X({}).current,H=ee(o)?ee(n.fallback)?Ne:n.fallback[g]:o,F=(U,G)=>{for(const V in M){const $=V;if($==="data"){if(!r(U[$],G[$])&&(!ee(U[$])||!r(W,G[$])))return!1}else if(G[$]!==U[$])return!1}return!0},se=Y(()=>{const U=!g||!t?!1:ee(l)?N().isPaused()||a?!1:c!==!1:l,G=K=>{const Ie=qe(K);return delete Ie._k,U?{isValidating:!0,isLoading:!0,...Ie}:Ie},V=P(),$=I(),ce=G(V),oe=V===$?ce:G($);let ne=ce;return[()=>{const K=G(P());return F(K,ne)?(ne.data=K.data,ne.isLoading=K.isLoading,ne.isValidating=K.isValidating,ne.error=K.error,ne):(ne=K,K)},()=>oe]},[s,g]),pe=da.useSyncExternalStore(Fe(U=>q(g,(G,V)=>{F(V,G)||U()}),[s,g]),se[0],se[1]),le=!w.current,Se=m[g]&&m[g].length>0,de=pe.data,A=ee(de)?H&&ys(H)?Qt(H):H:de,ae=pe.error,re=X(A),W=f?ee(de)?ee(re.current)?A:re.current:de:A,xe=Se&&!ee(ae)?!1:le&&!ee(l)?l:N().isPaused()?!1:a?ee(A)?!1:c:ee(A)||c,ve=!!(g&&t&&le&&xe),Ue=ee(pe.isValidating)?ve:pe.isValidating,Ke=ee(pe.isLoading)?ve:pe.isLoading,ue=Fe(async U=>{const G=S.current;if(!g||!G||b.current||N().isPaused())return!1;let V,$,ce=!0;const oe=U||{},ne=!u[g]||!oe.dedupe,K=()=>Un?!b.current&&g===y.current&&w.current:g===y.current,Ie={isValidating:!1,isLoading:!1},fe=()=>{R(Ie)},$e=()=>{const Oe=u[g];Oe&&Oe[1]===$&&delete u[g]},_t={isValidating:!0};ee(P().data)&&(_t.isLoading=!0);try{if(ne&&(R(_t),n.loadingTimeout&&ee(P().data)&&setTimeout(()=>{ce&&K()&&N().onLoadingSlow(g,n)},n.loadingTimeout),u[g]=[G(E),pn()]),[V,$]=u[g],V=await V,ne&&setTimeout($e,n.dedupingInterval),!u[g]||u[g][1]!==$)return ne&&K()&&N().onDiscarded(g),!1;Ie.error=Ne;const Oe=C[g];if(!ee(Oe)&&($<=Oe[0]||$<=Oe[1]||Oe[1]===0))return fe(),ne&&K()&&N().onDiscarded(g),!1;const Me=P().data;Ie.data=r(Me,V)?Me:V,ne&&K()&&N().onSuccess(V,g,n)}catch(Oe){$e();const Me=N(),{shouldRetryOnError:pt}=Me;Me.isPaused()||(Ie.error=Oe,ne&&K()&&(Me.onError(Oe,g,Me),(pt===!0||Ge(pt)&&pt(Oe))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||O())&&Me.onErrorRetry(Oe,g,Me,Z=>{const k=m[g];k&&k[0]&&k[0](Fn,Z)},{retryCount:(oe.retryCount||0)+1,dedupe:!0})))}return ce=!1,fe(),!0},[g,s]),He=Fe((...U)=>Ns(s,y.current,...U),[]);if(Tt(()=>{S.current=t,h.current=n,ee(de)||(re.current=de)}),Tt(()=>{if(!g)return;const U=ue.bind(Ne,en);let G=0;N().revalidateOnFocus&&(G=Date.now()+N().focusThrottleInterval);const $=ka(g,m,(ce,oe={})=>{if(ce==vs){const ne=Date.now();N().revalidateOnFocus&&ne>G&&O()&&(G=ne+N().focusThrottleInterval,U())}else if(ce==hs)N().revalidateOnReconnect&&O()&&U();else{if(ce==Es)return ue();if(ce==Fn)return ue(oe)}});return b.current=!1,y.current=g,w.current=!0,R({_k:E}),xe&&(ee(A)||yt?U():Ea(U)),()=>{b.current=!0,$()}},[g]),Tt(()=>{let U;function G(){const $=Ge(d)?d(P().data):d;$&&U!==-1&&(U=setTimeout(V,$))}function V(){!P().error&&(p||N().isVisible())&&(_||N().isOnline())?ue(en).then(G):G()}return G(),()=>{U&&(clearTimeout(U),U=-1)}},[d,p,_,g]),$i(W),a&&ee(A)&&g){if(!Un&&yt)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=t,h.current=n,b.current=!1;const U=v[g];if(!ee(U)){const G=He(U);Qt(G)}if(ee(ae)){const G=ue(en);ee(W)||(G.status="fulfilled",G.value=!0),Qt(G)}else throw ae}return{mutate:He,get data(){return M.data=!0,W},get error(){return M.error=!0,ae},get isValidating(){return M.isValidating=!0,Ue},get isLoading(){return M.isLoading=!0,Ke}}},Ma=Mt.defineProperty(Sa,"defaultValue",{value:ws}),Re=Pa(Va);function Da(e){const t=document.getElementById("lf-script"),n=e??t?.dataset.id,s=window.__LYTEFLO_CONFIG__,r=us(p=>p.dealerConfig),a=s||r?.id&&r?.dealer_id&&r?.id===n,o=n&&!a?`${Ee().CONFIGURATION}/config/${n}`:null,{data:l,error:c,isLoading:d}=Re(o,o?()=>he(o):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return Y(()=>({data:l?.data,isLoading:d,isError:c}),[l,c,d])}const Ga=Nt(void 0),Ba=({children:e})=>{const t=Q(),n=window.__LYTEFLO_CONFIG__,s=Da(t?.id),{setAccentColor:r,setRadius:a,setCtaColor:o,setCssStyling:l,setAccentContrast:c}=ts(),d=X(!1),{updateFlagSmithTraitsWithDealerConfig:p}=we();x(()=>{t?.id&&!d.current&&(p(t),d.current=!0)},[t,p]),x(()=>{n&&Dn(n)},[n]),x(()=>{s?.data?.id&&s?.data?.id!==t?.id&&Dn(s.data)},[s.data?.id,t?.id]);const _=Y(()=>t?.style?typeof t?.style=="string"?JSON.parse(t?.style):t?.style:null,[t?.style]);return x(()=>{_?.accentColor&&r(_?.accentColor),_?.accentContrast&&c(_?.accentContrast),_?.ctaColor&&o(_?.ctaColor),_?.radius&&a(_?.radius),_?.cssStyling&&l(_?.cssStyling)},[_]),i(Ga.Provider,{value:void 0,children:e})},Yn=e=>({id:e.id,name:e.name,dealer_id:e.dealer_id,inventory_provider:e.inventory_provider,address:e.address?{...e.address,id:e.address.id||"default"}:void 0,emails:e.emails&&e.emails.length>0?[{id:e.emails[0].key,key:e.emails[0].key,value:e.emails[0].value}]:null,phone_numbers:e.phone_numbers&&e.phone_numbers.length>0?[{id:e.phone_numbers[0].key,key:e.phone_numbers[0].key,value:e.phone_numbers[0].value}]:null,measurement:e.measurement,currency:e.currency,status:e.status,language:e.language,style:e.style?JSON.stringify(e.style):null,oem:e.oem,provider:e.provider,vendor_id:e.vendor_id||0,ga_tracking_id:e.ga_tracking_id||"",lead_tracking_enabled:e.lead_tracking_enabled||!1,lead_routing_enabled:e.lead_routing_enabled||!1,ip_address:e.ip_address||"",client_ip_address:e.client_ip_address||"",is_in_store:e.is_in_store||!1,crm_provider:e.crm_provider||"",is_default:e.is_default||!1,domain_names:e.domain_names?e.domain_names.map(t=>t.domain_name):null,widgets:e.widgets?e.widgets.map(t=>t.name):null}),Ha=e=>({id:String(e.vin||""),country:String(e.country||""),vin:String(e.vin||""),year:String(e.year||""),make:String(e.make||""),model:String(e.model||""),trim:String(e.trim_name||""),uid:Number(e.uid||0),msrp:Number(e.msrp||0),range_km:Number(e.range_km||0),range_mi:Number(e.range_mi||0),fuel_type:String(e.fuel_type||""),is_plugin:String(e.is_plugin||""),trim_code:String(e.trim_code||""),trim_name:String(e.trim_name||""),make_group:String(e.make_group||""),model_year:String(e.model_year||""),powertrain:String(e.powertrain||""),vehicle_id:Number(e.vehicle_id||0),combined_mpg:Number(e.combined_mpg||0),max_power_hp:Number(e.max_power_hp||0),max_power_kw:Number(e.max_power_kw||0),version_name:String(e.version_name||""),driven_wheels:String(e.driven_wheels||""),max_torque_nm:Number(e.max_torque_nm||0),bodystyle_name:String(e.bodystyle_name||""),gross_weight_kg:Number(e.gross_weight_kg||0),number_of_doors:Number(e.number_of_doors||0),vehicle_to_grid:String(e.vehicle_to_grid||""),vehicle_to_home:String(e.vehicle_to_home||""),vehicle_to_load:String(e.vehicle_to_load||""),assembly_country:String(e.assembly_country||""),gross_weight_lbs:Number(e.gross_weight_lbs||0),max_torque_lb_ft:Number(e.max_torque_lb_ft||0),seating_capacity:Number(e.seating_capacity||0),combined_l_100_km:Number(e.combined_l_100_km||0),epa_vehicle_class:String(e.epa_vehicle_class||""),transmission_type:String(e.transmission_type||""),combined_kwh_100_km:Number(e.combined_kwh_100_km||0),combined_kwh_100_mi:Number(e.combined_kwh_100_mi||0),global_version_name:String(e.global_version_name||""),max_charge_power_kw:Number(e.max_charge_power_kw||0),trim_classification:String(e.trim_classification||""),battery_capacity_kwh:Number(e.battery_capacity_kwh||0),electric_driven_wheels:String(e.electric_driven_wheels||""),battery_warranty_months:Number(e.battery_warranty_months||0),charging_percent_end_l2:Number(e.charging_percent_end_l2||0),charging_percent_end_l3:Number(e.charging_percent_end_l3||0),charging_connector_types:e.charging_connector_types?String(e.charging_connector_types).split(","):[],charging_percent_start_l2:Number(e.charging_percent_start_l2||0),charging_percent_start_l3:Number(e.charging_percent_start_l3||0),charging_duration_hours_l2:Number(e.charging_duration_hours_l2||0),charging_duration_hours_l3:Number(e.charging_duration_hours_l3||0),tesla_network_availability:!!e.tesla_network_availability,usable_battery_capacity_kwh:Number(e.usable_battery_capacity_kwh||0),battery_warranty_distance_km:Number(e.battery_warranty_distance_km||0),battery_warranty_distance_mi:Number(e.battery_warranty_distance_mi||0),battery_options:e.battery_options!==void 0?typeof e.battery_options=="string"?e.battery_options:JSON.stringify(e.battery_options):void 0,standard_battery_name:e.standard_battery_name!==void 0?String(e.standard_battery_name):void 0,electric_range_km:e.electric_range_km?Number(e.electric_range_km):void 0,electric_range_mi:e.electric_range_mi?Number(e.electric_range_mi):void 0,combined_range_km:e.combined_range_km?Number(e.combined_range_km):void 0,combined_range_mi:e.combined_range_mi?Number(e.combined_range_mi):void 0,odometer:Number(e.odometer||0)});let tn=!1,qn=0;const $a=10*60*1e3,Fa=async e=>{if(tn)return;const t=Date.now();if(t-qn<$a)return;const n="https://cdn-dev.lyteflo.tech/saleshub/manifest.json";try{tn=!0,qn=t;const s=ct("lf_manifest_version"),r=await fetch(n);if(r.ok){const o=(await r.json()).version;o&&s&&s!==o&&(Et("lf_manifest_version",o,60*24*30),e(!0)),o&&!s&&Et("lf_manifest_version",o,60*24*30)}else e(!1)}catch(s){console.warn("Failed to check manifest version:",s)}finally{tn=!1}},Kn=()=>{const e=document.documentElement.lang;return e?Wa(e):null},Wa=e=>{if(!e)return null;const t=e.toLowerCase().trim(),n={en:be.EN,english:be.EN,us:be.EN,ca:be.EN,fr:be.FR,french:be.FR,français:be.FR,francais:be.FR,"fr-ca":be.FR,fr_ca:be.FR,quebec:be.FR,québec:be.FR};if(n[t])return n[t];const s=t.split("-")[0].split("_")[0];return n[s]?n[s]:t.includes("fr")||t.includes("français")||t.includes("francais")?be.FR:t.includes("en")||t.includes("english")?be.EN:null},Ua=()=>{const{i18n:e}=_e(),t=X(null);x(()=>{const n=s=>{if(!(!s||e.language===s||t.current===s)){t.current=s,document.documentElement.lang=s;try{localStorage.setItem("lf_language",s)}catch{}e.changeLanguage(s)}};try{const s=Kn();s&&n(s);const r=new MutationObserver(()=>{const a=Kn();a&&a!==t.current&&n(a)});return r.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),()=>r.disconnect()}catch(s){console.debug("Language detection failed:",s)}},[e])},ja="emNLQnWtq7aAX3H3hprbyk",za=({children:e})=>{const[t,n]=T(!1),s=X(!1);return x(()=>{s.current||(s.current=!0,Fa(n))},[]),Ua(),i(Js,{isWidget:!0,children:i(Xs,{forceRefresh:t,environmentId:ja,waitForTraits:!0,children:i(Ba,{children:i(Ma,{value:{refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1},children:e})})})})},In=[z.SRP_SAVINGS],Ya=()=>({country:"",uid:0,vehicle_id:0,assembly_country:"",battery_capacity_kwh:0,bodystyle_name:"",battery_supplier_primary:"",battery_supplier_secondary:"",battery_supplier_ternary:"",battery_type:"",battery_warranty_months:0,battery_warranty_distance_km:0,battery_warranty_distance_mi:0,charging_connector_types:"",charging_duration_hours_l2:0,charging_duration_hours_l3:0,charging_percent_start_l2:0,charging_percent_end_l2:0,charging_percent_start_l3:0,charging_percent_end_l3:0,combined_kwh_100_km:0,combined_kwh_100_mi:0,combined_l_100_km:0,combined_mpg:0,driven_wheels:"",electric_driven_wheels:"",fuel_type:"",is_plugin:"",number_of_doors:0,powertrain:"",make:"",make_group:"",max_charge_power_kw:0,max_power_kw:0,max_power_hp:0,max_torque_lb_ft:0,max_torque_nm:0,model:"",model_year:"",msrp:0,seating_capacity:0,range_km:0,range_mi:0,electric_range_km:0,electric_range_mi:0,combined_range_km:0,combined_range_mi:0,tesla_network_availability:!1,trim_name:"",trim_classification:"",trim_code:"",transmission_type:"",usable_battery_capacity_kwh:0,vehicle_to_grid:"",vehicle_to_home:"",vehicle_to_load:"",version_name:"",vin:"",global_version_name:"",year:"",epa_vehicle_class:"",gross_weight_kg:0,gross_weight_lbs:0,standard_battery_name:"",battery_options:"",new_used:"",mileage:0,price:0,internet_price:0,stock_number:"",odometer:0}),dt=e=>e?{country:e.country,uid:String(e.uid),vehicle_id:String(e.vehicle_id),assembly_country:e.assembly_country,battery_capacity_kwh:String(e.battery_capacity_kwh),bodystyle_name:e.bodystyle_name,make:e.make,model:e.model,model_year:e.model_year,powertrain:e.powertrain,msrp:String(e.msrp),new_used:e.new_used||"",mileage:String(e.mileage||0),price:String(e.price||0),internet_price:String(e.internet_price||0),stock_number:e.stock_number||"",odometer:String(e.odometer||0),vin:e.vin,usable_battery_capacity_kwh:String(e.usable_battery_capacity_kwh),max_charge_power_kw:String(e.max_charge_power_kw),charging_duration_hours_l2:String(e.charging_duration_hours_l2),charging_duration_hours_l3:String(e.charging_duration_hours_l3),standard_battery_name:e.standard_battery_name,max_power_hp:String(e.max_power_hp),max_power_kw:String(e.max_power_kw),combined_kwh_100_km:String(e.combined_kwh_100_km),combined_kwh_100_mi:String(e.combined_kwh_100_mi),range_mi:String(e.range_mi),range_km:String(e.range_km),battery_options:e.battery_options}:null,qa=(e,t,n,s)=>{if(!t||!n||!s)return{isLoading:!0};if(!t.combined_l_100_km&&!t.combined_mpg)return{isLoading:!0};const r=e===nt.METRIC?gt.LITER:gt.GALLON,a=e===nt.METRIC?t?.combined_l_100_km:Number(t?.combined_l_100_km)*.425144,o=String(s?.unit).toLowerCase().match(Gn)?s?.rate/100:s?.rate,l=n?.unit.match(Wi)?gt.LITER:gt.GALLON;let c=n?.unit?.match(Gn)?n?.rate/100:n?.rate;return l!==r&&(c=l===gt.LITER?c*3.78541:c/3.78541),{isLoading:!1,electricityCost:Ye(o,3),gasCost:Ye(c,2),inverseEfficiency:Ye(100/Number(a),2),comparisonEfficiency:Ye(Number(a),2)}},On=[z.VEHICLE_SAVINGS,z.BATTERY,z.CHARGING,z.CHARGE_MAP,z.INCENTIVES_BANNER,z.BATTERY_REPORT_BADGE],Ka=(e,t,n)=>{const s=n===ge.SRP?In:On,a=Object.entries(e).filter(([l])=>s.includes(l)).map(([l,c])=>({name:l,loaded:c.loaded,message:c.message})),o={configuration_id:t.id||"",configuration_name:t.name||"",configuration_provider:t.provider||"",configuration_oem:t.oem||"",domain_name:window.location.hostname,load_time:Ui(),widgets:a};if(t?.status!=="test"){if(!t?.id){console.warn("⚠️ Lyteflo: No dealer configuration ID found for logging");return}he(`${Ee(!1).CONFIGURATION}/log`,{method:"POST",body:o}).catch(l=>{console.error("❌ Configuration log request failed:",l)})}},Za=e=>{const t=new Set(window.asc_datalayer?.measurement_ids??[]);return e&&t.add(e),Array.from(t)},Xa=({eventName:e,eventId:t,additionalParameters:n,oemProgram:s})=>{s===ti.SHIFT_DIGITAL&&ea(e,t,n)},Dt=({eventName:e,parameters:t,eventId:n,additionalParameters:s})=>{const r="widget",a=us.getState().dealerConfig,o=Za(ei(r)),{ga_tracking_id:l}=a??{},c=Array.from(new Set([...o,...l?[l]:[]])),d=JSON.parse(ct("lf_feature_flags")||"{}"),p=hn(d),_=s?{...p,...s}:p,f=a?.widgets.find(m=>m.name===z.VEHICLE_SAVINGS)?.type;f&&(_.lf_savings_type=f),a?.oem_program&&Xa({eventName:e,eventId:n,additionalParameters:s,oemProgram:a.oem_program}),Qs({eventId:n,eventName:e,parameters:t,sendTo:c,dealerConfiguration:a,additionalParameters:_})},ye=()=>{const{selectedVehicle:e,pageType:t}=te(),{flags:n}=we(),s=hn(n);return({eventName:r,parameters:a,eventId:o})=>{const l={...Object.fromEntries(Object.entries(e??{}).map(([c,d])=>[c,typeof d=="number"?d.toString():d])),lf_page_type:t,...s};Dt({eventName:r,parameters:a,eventId:o,additionalParameters:l})}},Ja=(e,t,n,s,r,a,o,l,c,d)=>{const p={},_=t?.vin,f=n.isError,m=s.isError,C=r.isError,u=a.isError;if(l===ge.VDP?n.isLoading||s.isLoading||r.isLoading||a.isLoading:!1)return{};const g=l===ge.VDP&&(!_||f),E=e?.widgets?.filter(w=>w.enabled)||[];return E.length===0?{}:(E.forEach(w=>{const b=w.name;let y=!0;const S=[],h=o.get(b);if(h&&h.attempted)h.injected||(y=!1,S.push(`Injection failed: ${h.message||"Unknown error"}`));else{if(g)y=!1,!_&&l===ge.VDP&&S.push("No VIN found"),f&&S.push("Vehicle data error");else if(l===ge.SRP)switch(b){case z.SRP_SAVINGS:{if(y=!!c&&(d??0)>0,h&&h.attempted)if(!h.injected)y=!1,S.push(`Injection failed: ${h.message||"Unknown error"}`);else{const P=h.message||"",R=P.startsWith("Partial success"),q=P.startsWith("All ");(R||q||(P==="No valid containers found"||P==="No containers provided"))&&(y=!1,P&&S.push(P))}break}}else switch(b){case z.VEHICLE_SAVINGS:f&&(y=!1,S.push("Vehicle data error")),m&&(y=!1,S.push("Gas data error")),C&&(y=!1,S.push("Electricity data error"));break;case z.BATTERY:case z.CHARGING:case z.CHARGE_MAP:case z.BATTERY_REPORT_BADGE:f&&(y=!1,S.push("Vehicle data error"));break;case z.INCENTIVES_BANNER:u&&(y=!1,S.push("Incentive data error"));break;default:f&&(y=!1,S.push("Vehicle data error"))}(!h||!h.attempted)&&(l===ge.VDP||b!==z.SRP_SAVINGS)&&S.push("Widget was not attempted")}p[b]={loaded:y,message:S.length>0?S.join(", "):void 0}}),p)},Qa=({pageType:e,dealerConfig:t,isLoadingCosts:n,injectionStatuses:s,srpValidatedReady:r,srpValidatedCount:a,foundVehicle:o,vehicleData:l,gasData:c,electricityData:d,incentiveData:p,hasLoggedConfig:_,setHasLoggedConfig:f,selectedVehicle:m})=>{const C=X(!1),u=X(!1),v=X(null),g=X(null),E=X(!1),{flags:w}=we(),b=hn(w);x(()=>{v.current!==null&&v.current!==e&&(f(!1),C.current=!1,u.current=!1,E.current=!1),v.current=e},[e,f]),x(()=>{const y=e===ge.SRP;if(!t||(n||s.size===0)&&!y)return;const S=y?In:On,h=Array.from(s.keys()),N=t.widgets?.filter(M=>M.enabled&&S.includes(M.name)&&(y||h.includes(M.name)))||[];if(y&&(!r||a===0)||!(y?!0:N.every(M=>s.get(M.name)?.attempted===!0))||(y?!1:N.some(M=>s.get(M.name)?.message==="Injection in progress")))return;const R=Ja(t,o,l,c,d,p,s,e,r,a),I=g.current!==null&&g.current!==m&&m!==null&&_;if(!(_&&!I)&&(I&&(E.current=!1),!E.current)){if(Object.keys(R).length>0){Ka(R,t,e),E.current=!0;const M=Object.keys(R),H=M.filter(le=>R[le]?.loaded===!0),F=M.filter(le=>R[le]?.loaded===!1),se=e===ge.SRP?[z.SRP_SAVINGS]:[z.VEHICLE_SAVINGS,z.BATTERY,z.CHARGING,z.CHARGE_MAP];if(H.filter(le=>se.includes(le)).length>0&&t.id&&!C.current){const le=m?.powertrain??o?.powertrain,Se=le===mt.BEV||le===mt.PHEV,de=e===ge.VDP&&Se&&o?.vin,A=e===ge.SRP;if(de||A){const re=window.location.search.split("lyteflo-share=")[1],W=e===ge.VDP?Je.LYTEFLO_VIEW:Je.LYTEFLO_SRP_VIEW;Dt({eventName:W,parameters:{product_name:D.SavingsHub,share_id:re},eventId:ta(re,e===ge.VDP?j.VDP:j.SRP),additionalParameters:{...dt(m),lf_page_type:e,...b}}),C.current=!0}}if(F.length>0&&t.id&&!u.current){const le=m?.powertrain,Se=le===mt.BEV||le===mt.PHEV;if(e===ge.VDP&&Se&&o?.vin||e===ge.SRP){const de=window.location.search.split("lyteflo-share=")[1];Dt({eventName:e===ge.VDP?Je.LYTEFLO_VIEW_ERROR:Je.LYTEFLO_SRP_VIEW_ERROR,parameters:{product_name:D.SavingsHub,share_id:de},eventId:e===ge.VDP?j.VDP.LYTEFLO_VIEW_ERROR:j.SRP.LYTEFLO_VIEW_ERROR,additionalParameters:{...dt(m),lf_page_type:e,lf_failed_widgets:F.join(","),...b}}),u.current=!0}}I||f(!0)}g.current=m}},[n,t,o,l,c,d,p,s,e,r,a,_,f,m,b])};function An(e){return/^[ABCEGHJKLMNPRSTVWXYZ]\d[ABCEGHJKLMNPRSTVWXYZ](\s?\d[ABCEGHJKLMNPRSTVWXYZ]\d)?$/i.test(e)}function Ln(e){return/^\d{5}(-\d{4})?$/.test(e)}const nn=(e,t)=>{if(!t||!e)return"";let n=e;if(t===Pt.CA)return n=e.toUpperCase().replace(/[^A-Z0-9]/g,""),n.length>3&&(n=n.substring(0,3)+" "+n.substring(3)),n=n.substring(0,7),An(n)?n:e;if(t===Pt.US){n=e.replace(/[^0-9-]/g,"");const s=n.split("-");return n=s[0]+(s.length>1?"-"+s.slice(1).join(""):""),s[0].length<=5&&(s.length===1||s.length===2&&(s[1].length<=4||s[1]===""))?n.substring(0,10):Ln(n)?n:e}return e},Os=(e,t)=>{if(!e)return e;let n=e;return t===Pt.CA?n=n.toLocaleLowerCase().replace(/[^a-z0-9]/g,""):t===Pt.US&&(n=n.replace(/[^0-9-]/g,"").replace(/^(\d{5})(\d{1,4})$/,"$1-$2")),n},er=(e,t)=>!e||!t?!1:t==="US"?Ln(e):An(e);function tr(e,t,n){let s=e&&t?`${Ee().FUEL}/${e.toLocaleLowerCase()}/rates/gasoline/${Os(t,e)}`:null;s&&n&&(s=bt(s,{fuel_type:n}));const{data:r,error:a,isLoading:o}=Re(s,s?()=>he(s):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:r,isLoading:o,isError:a}}function nr(e,t){const n=e&&t?`${Ee().FUEL}/${e.toLocaleLowerCase()}/rates/electricity/${Os(t,e)}`:null,{data:s,error:r,isLoading:a}=Re(n,n?()=>he(n):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:s,isLoading:a,isError:r}}const sr=e=>typeof e=="object"&&e!==null,Ve=(e,t)=>{if(sr(e)&&t in e)return e[t]};function ir(e,t,n,s,r,a){const o=t&&typeof t=="object"&&t!==null,l=e?.country&&o&&"powertrain"in t&&"new_used"in t&&!n?`${Ee().INCENTIVE}/incentives`:null,c=JSON.stringify({country:e?.country,state:e?.state,city:e?.city,bodystyle_name:Ve(t,"bodystyle_name"),make:Ve(t,"make"),model:Ve(t,"model"),msrp:Ve(t,"msrp"),assembly_country:Ve(t,"assembly_country"),new_used:Ve(t,"vehicle_type")??Ve(t,"new_used"),powertrain:Ve(t,"powertrain"),price:Ve(t,"internet_price")??Ve(t,"price"),year:Ve(t,"year"),vin:Ve(t,"vin"),dealer_id:s,config_id:r,inventory_provider:a}),d=l?[l,c]:null,{data:p,error:_,isLoading:f}=Re(d,()=>l?he(l,{method:"POST",body:c}):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});return{data:p,isLoading:f,isError:_}}function ar(e,t,n){let s=t&&e?`${Ee().VEHICLE}/${e}/vehicle/${t}`:null;n&&s&&(s=bt(s,{title:n}));const{data:r,error:a,isLoading:o}=Re(s,s?()=>he(s):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:r,isLoading:o,isError:a}}function rr(e,t,n){const s=e&&t&&t!=="0"&&n?`${Ee().INVENTORY}/inventory/${e}/${t}/${n}`:null;return Re(s,s?()=>he(s):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1})}var vt=(e=>(e.total="total",e.monthly="monthly",e.annual="annual",e))(vt||{});const As=12,Ls=3,mn=["rebate_tax_credit","charger","other"],or=e=>e.sort((t,n)=>{const s=mn.indexOf(t.type),r=mn.indexOf(n.type);return s!==r?s-r:n.max_value-t.max_value}),lr=e=>{const t=mn.reduce((n,s)=>(n[s]=[],n),{});return e.filter(n=>!n.not_applicable).forEach(n=>{let s=n.type;s!=="rebate_tax_credit"&&(s="other"),n.type=s,t[s]&&t[s].push(n)}),Object.values(t).forEach(n=>n.sort((s,r)=>(r.max_value??0)-(s.max_value??0))),t},Mo=e=>{switch(e){case"other":return si;case"charger":return ni;case"rebate_tax_credit":return Pn;default:return Pn}},Ts=Nt(void 0),Rs=({children:e,foundVehicle:t,setFoundVehicle:n,pageType:s})=>{const r=Q(),{injectionStatuses:a,hasLoggedConfig:o,setHasLoggedConfig:l,srpValidatedReady:c,srpValidatedCount:d}=$t(),{address:p,currency:_,measurement:f,provider:m,dealer_id:C,widgets:u,inventory_provider:v}=r,[g,E]=T(null),{setAccentColor:w,setRadius:b}=ts(),[y,S]=T(f===nt.METRIC?16e3:13500),[h,N]=T(5),[O,P]=T(vt.total),[R,q]=T(null),[I,M]=T(null),[H,F]=T(""),[se,pe]=T(""),[le,Se]=T(""),[de,A]=T(!0),[ae,re]=T([]),[W,xe]=T(null),[ve,Ue]=T(null),Ke=Z=>{Z>As||Z<Ls||N(Z)},ue=ar(R?.country,t?.vin,t?.trim),He=rr(v,C,t?.vin),Pe=tr(R?.country,R?.zipCode,ve?.fuel_type),U=nr(R?.country,R?.zipCode),G=X();x(()=>{const Z=document.getElementById(De.SCRIPT)?.dataset.extensionId;if(Z)return window.__LYTEFLO_EXTENSION_ID__=Z,G.current&&window.removeEventListener("message",G.current),G.current=k=>{if(k.source===window&&k.data.type==="lf-updateWidget"&&k.data.data){const me=[...u],je=me.findIndex(rt=>rt.id===k.data.data.id);je!==-1&&(me[je]=k.data.data,Yt({widgets:me}))}k.source===window&&k.data.type==="lf-stylesUpdate"&&k.data.data&&(k.data.data.radius&&b(k.data.data.radius),k.data.data.accentColor&&w(k.data.data.accentColor),k.data.data.provider&&m!==k.data.data.provider&&Yt({provider:k.data.data.provider})),k.source===window&&k.data.type==="lf-setConfig"&&k.data.data.config&&Yt(k.data.data.config),k.source===window&&k.data.type==="lf-requestData"&&k.data.data&&window.setTimeout(()=>{window.postMessage({type:"lf-sendData",data:W},"*")},300)},G.current&&window.addEventListener("message",G.current),()=>{G.current&&window.removeEventListener("message",G.current)}},[u,W]),x(()=>{if(ue?.data?.data){const Z=ue.data.data;let k=Z.selected_vehicle;if(!W&&k){const me=k?.powertrain??t?.powertrain;k={...t,...k,powertrain:me??""},xe(k)}else k&&xe(me=>me&&{...me,...k});if(!ve&&k){const je=ct(`lf-comparison-vehicle-${k.make}-${k.model}`)??Z.comparison_vehicle??null;Ue(je)}}},[ue?.data?.data]),x(()=>{const Z=He?.data?.data;Z&&xe(k=>{const me=Z.vehicle_type==="new"||k?.new_used==="new"?"new":"used";return k?{...k,new_used:me,...Z}:{new_used:me,...Z}})},[He?.data?.data,xe]);const{hideIncentives:V,vehicleSavingsType:$,chargeMapType:ce,alwaysShowBannerOnNew:oe,batteryBadgeOptions:ne}=Y(()=>{const Z=r?.widgets?.find(tt=>tt.name===z.VEHICLE_SAVINGS),k=r?.widgets?.find(tt=>tt.name===z.CHARGE_MAP),me=Z?.options,je=r?.widgets?.find(tt=>tt.name===z.INCENTIVES_BANNER)?.options,rt=r?.widgets?.find(tt=>tt.name===z.BATTERY_REPORT_BADGE)?.options;return{hideIncentives:me?typeof me=="string"?JSON.parse(me).hideIncentives:me?.hideIncentives:!1,vehicleSavingsType:Z?.type,chargeMapType:k?.type,alwaysShowBannerOnNew:je?typeof je=="string"?JSON.parse(je).alwaysShowOnNew:je?.alwaysShowOnNew:!1,batteryBadgeOptions:rt?typeof rt=="string"?JSON.parse(rt):rt:{}}},[r?.widgets]),K=ir(R,W,V,C,r.id,v),Ie=Pe.isLoading||U.isLoading||ue.isLoading||!V&&K.isLoading,fe=Y(()=>qa(f,ve,Pe?.data?.data??{unit:"",rate:0},U?.data?.data?.[0]??{unit:"",rate:0}),[f,ve,Pe?.data?.data,U?.data?.data]);x(()=>{ue.isLoading||(fe?.inverseEfficiency&&se===""&&f===nt.IMPERIAL?pe(fe.inverseEfficiency):fe?.comparisonEfficiency&&se===""&&f===nt.METRIC&&pe(fe.comparisonEfficiency))},[ue.isLoading,fe,se,f]),x(()=>{Pe.isLoading||fe?.gasCost&&F(fe.gasCost)},[Pe.isLoading,fe?.gasCost]),x(()=>{U.isLoading||fe?.electricityCost&&Se(fe.electricityCost)},[U.isLoading,fe?.electricityCost]);const $e=Y(()=>lr(K?.data?.data??[]),[K?.data?.data]);x(()=>{ae.length>0&&K.isLoading&&re([])},[ae.length,K.isLoading]),x(()=>{if(!V&&$e?.rebate_tax_credit&&$e?.rebate_tax_credit?.length>0){const Z=$e.rebate_tax_credit.filter(k=>!k.not_applicable&&k.max_value&&k.max_value>0);re(Z??[])}},[$e?.rebate_tax_credit,V]);const _t=V?0:ae.reduce((Z,k)=>Z+(k.max_value||0),0),Oe=Y(()=>ii(de,y,h,f,_,se,le,H,_t,W||Ya(),ve?.powertrain),[de,y,h,f,_,se,le,_t,H,ve,W]);x(()=>{let Z=null;!R?.zipCode&&p&&(Z={city:p.city,state:p.state,zipCode:p.zip_code,country:p.country}),Z&&!ai(Z,R)&&q(Z)},[R,p]);const Me=!Oe||Ie,pt=Fe(Z=>{if(M(Z),!Z){const k=j.VDP.MODAL[I].CLOSE;Dt({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"toggle",event_action:"click",event_action_result:"calc",product_name:I,element_title:"",element_text:"",element_state:"inactive",element_value:""},eventId:k,additionalParameters:{...dt(W),lf_page_type:s}})}},[I,s,W]);return Qa({pageType:s,dealerConfig:r,isLoadingCosts:Ie,injectionStatuses:a,srpValidatedReady:c,srpValidatedCount:d,foundVehicle:t,vehicleData:ue,gasData:Pe,electricityData:U,incentiveData:K,hasLoggedConfig:o,setHasLoggedConfig:l,selectedVehicle:W}),i(Ts.Provider,{value:{batteryData:g,setBatteryData:E,chargeAtHome:de,comparisonEfficiency:se,distance:y,electricityCost:le,foundVehicle:t,openModal:I,isLoadingAttributes:!W,hasAttributesError:ue?.isError,isLoadingVehicleSavings:Me,hasVehicleSavingsError:ue.isError||Pe.isError||U.isError,hideIncentives:V,incentives:ae,inventoryData:He,gasCost:H,timeline:O,years:h,vin:t?.vin,address:R,vehicleData:{isLoading:ue?.isLoading,data:ue?.data,isError:ue?.isError},savingsData:Oe,incentiveData:{isLoading:K?.isLoading,data:K?.data,isError:K?.isError},groupedIncentives:$e,setComparisonVehicle:Ue,setComparisonEfficiency:pe,setDistance:S,setFoundVehicle:Z=>{W?.vin!==Z?.vin&&xe(null),n(Z)},setOpenModal:pt,setTimeline:P,setYears:Ke,setAddress:q,setElectricityCost:Se,setGasCost:F,setChargeAtHome:A,setIncentives:re,selectedVehicle:W,comparisonVehicle:ve,widgets:{batteryBadge:{useAccentColor:ne?.useAccentColor,demoScore:ne?.score,demoHasCellIssues:ne?.hasCellIssues},vehicleSavings:{hideIncentives:V,type:$},chargeMap:{type:ce},incentivesBanner:{alwaysShowOnNew:oe}},pageType:s},children:e})},te=()=>{const e=Ct(Ts);if(!e)throw new Error("useDealership must be used within a DealershipProvider");return e},cr=e=>B("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("g",{id:"chevron-right"},B("path",{id:"Icon",d:"M20 24L12 16L20 8",stroke:"#121010",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),dr=e=>B("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("g",{id:"chevron-right"},B("path",{id:"Icon",d:"M12 24L20 16L12 8",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),xs=e=>{const t=["lf-widget",`lf-${e.provider}-widget`];return e.oem&&e.oem.trim()&&t.push(`lf-${e.oem}-widget`),t.join(" ")};let ht=0;const ur=()=>{ht===0&&(document.body.style.overflow="hidden"),ht++},Zn=()=>{ht=Math.max(0,ht-1),ht===0&&requestAnimationFrame(()=>{document.body.style.overflow=""})},fr=({items:e,onClose:t,openModal:n,setOpenModal:s,selectedVehicle:r})=>{const{t:a}=_e(),o=ye(),l=Q(),[c,d]=T(()=>{if(n){const h=e.findIndex(N=>N.type===n);return h>=0?h:0}return null}),[p,_]=T(null),f=X(null),m=X(null),C=X(null),u=X(!1),v=Fe(()=>{u.current||(ur(),u.current=!0)},[]);x(()=>{window.lfSetTimeout&&window.setTimeout!==window.lfSetTimeout&&(window.setTimeout=window.lfSetTimeout)},[n]);const g=Fe(()=>{u.current&&(Zn(),u.current=!1)},[]);Qe(()=>{n&&!u.current&&v()},[n,v]);const E=()=>{d(null),Zn(),u.current=!1,t?.()},w=h=>{h.target===h.currentTarget&&E()};Qe(()=>{const h=N=>{N.key==="Escape"&&E()};return n?document.addEventListener("keydown",h):document.removeEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[n]),Qe(()=>{if(n){const h=e.findIndex(N=>N.type===n)??0;c===null&&_(null),d(h)}},[e,n]),Qe(()=>(n?v():g(),()=>{u.current&&!n&&g()}),[n,v,g]);const b=()=>{_("right");const h=((c??0)+1)%e.length;d(h),s(e[h].type),o({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"popup",element_subtype:"cta_button",event_action:"click",event_action_result:"next_step",product_name:n??D.SavingsHub,element_text:"Next"},eventId:j.COMPONENT.CAROUSEL.NEXT,additionalParameters:r})},y=()=>{_("left");const h=((c??0)-1+e.length)%e.length;d(h),s(e[h].type),o({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"popup",element_subtype:"cta_button",event_action:"click",event_action_result:"next_step",product_name:n??D.SavingsHub,element_text:"Previous"},eventId:j.COMPONENT.CAROUSEL.PREVIOUS,additionalParameters:r})},S=Y(()=>h=>{if(h===c)return p?"lf-transition-all lf-duration-300 lf-ease-in-out":"";const N=`lf-absolute lf-inset-0 lf-overflow-x-hidden ${p?"lf-transition-all lf-duration-300 lf-ease-in-out":""} lg:lf-block lf-hidden`;return c===null?h===0?p?"lf-transition-all lf-duration-300 lf-ease-in-out":"":`${N} lf-translate-x-full lf-opacity-0`:c===0&&h===e.length-1||h<c&&(c!==e.length-1||h!==0)?`${N} -lf-translate-x-full lf-opacity-0`:`${N} lf-translate-x-full lf-opacity-0`},[c,p,e.length]);return i(Ce,{children:!!n&&yn(i(ri.Provider,{value:{isOpen:!!n,closeModal:E},children:i("div",{className:xs(l),children:i("div",{className:"lf-pointer-events-auto lf-fixed lf-inset-0 lf-bottom-0 lf-z-[2147483648] lf-box-border lf-overflow-auto lf-bg-black/50 lf-transition-opacity lf-duration-200 lf-ease-in","aria-modal":"true",role:"dialog","data-notranslate":"true",children:i(Gt,{className:"lf-bg-transparent",children:[e.length>1&&i(Ce,{children:[i(lt,{ref:m,onClick:y,className:"lf-z-1 lf-pointer-events-auto lf-fixed lf-left-4 lf-top-1/2 lf-z-[2147483649] lf-hidden -lf-translate-y-1/2 lf-items-center lf-justify-center lf-p-2 lg:lf-flex",ariaLabel:a("shared:previous"),shouldAnimate:!1,children:i(cr,{width:24,height:24})}),i(lt,{ref:C,onClick:b,className:"lf-z-1 lf-pointer-events-auto lf-fixed lf-right-4 lf-top-1/2 lf-z-[2147483649] lf-hidden -lf-translate-y-1/2 lf-items-center lf-justify-center lf-p-2 lg:lf-flex",ariaLabel:a("shared:next"),shouldAnimate:!1,children:i(dr,{width:24,height:24})})]}),i("div",{className:"lf-flex lf-min-h-screen lf-items-center lf-justify-center lf-py-6",onClick:w,children:i("div",{className:"lf-w-full",children:i("div",{className:"lf-relative lf-flex lf-w-full lf-justify-center lf-overflow-x-hidden",children:e.map((h,N)=>i("div",{className:S(N),"aria-hidden":N!==c,children:i(ns,{children:i(st,{ref:f,className:"lf-bg-panel-default lf-pointer-events-auto lf-z-[2147483650] lf-w-full lf-p-0 lf-shadow-lg lg:lf-w-screen lg:lf-max-w-[1200px] lg:lf-p-2",children:[i("div",{className:"lf-sticky lf-top-0 lf-z-[10000]",children:i(lt,{onClick:()=>E(),className:"lf-absolute lf-right-6 lf-top-6 lg:lf-right-4 lg:lf-top-4",ariaLabel:a("shared:close"),shouldAnimate:!0,children:i(oi,{width:24,height:24})})}),h.component]})})},`${h.type}-${N}`))})})})]})})})}),document.body)})},_r=()=>{const{t:e}=_e();return i("div",{className:"lf-flex lf-flex-col lf-w-full lf-flex-shrink-0 lf-items-center lf-justify-center lf-flex-col lf-space-y-6 lf-px-6 lf-pb-6 lg:lf-p-16 lf-text-center",children:[i(li,{className:"lf-size-12 lf-block"}),i(L,{as:"div",size:"6",className:"lf-font-bold",children:e("shared:loading")})]})},ie={ACCENT_ATTRIBUTES:"accent_attributes",CARBON_FOOTPRINT:"carbon_footprint",CHARGE_MAP:"charge_map",CHARGE_MAP_ON_NEW_VEHICLES:"charge_map_on_new",INCENTIVES_OPEN:"incentives_open",VEHICLE_SAVINGS_ON_NEW_VEHICLES:"vehicles_savings_on_new",VEHICLE_SAVINGS:"vehicle_savings",COPY_LINK:"copy_link",SRP_SAVINGS:"srp_savings",INCENTIVES_BANNER:"incentives_banner",ICON_COLOR:"icon_color",EV_EXPERT:"ev_expert",CHARGE_MAP_POLYGON_RANGE:"charge_map_polygon_range",ANIMATE_SAVINGS:"animate_savings",LEAD_PHONE_NUMBER:"lead_phone_number",BATTERY_REPORT_LEAD:"battery_report_lead"},Ps=()=>{const{flags:e}=we(),{address:t}=Q(),{foundVehicle:n}=te(),s=e?.[ie.CHARGE_MAP]?.enabled&&e?.[ie.CHARGE_MAP]?.value===Te.SHOW,r=e?.[ie.CHARGE_MAP_ON_NEW_VEHICLES]?.enabled&&e?.[ie.CHARGE_MAP_ON_NEW_VEHICLES]?.value===Te.HIDE;return!(!s||!t?.latitude||!t?.longitude||r&&n?.new_used==="new")},pr=Ht(()=>Ft(()=>import("./lyteflo6.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),gr=Ht(()=>Ft(()=>import("./lyteflo7.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),mr=Ht(()=>Ft(()=>import("./lyteflo8.js"),__vite__mapDeps([8,1,2,3,4,6]))),vr=Ht(()=>Ft(()=>import("./lyteflo9.js"),__vite__mapDeps([9,1,2,3,4,6]))),Lt=({children:e})=>i(bn,{fallback:i(_r,{}),children:e}),ks=({showIncentives:e,openModal:t,setOpenModal:n,selectedVehicle:s})=>{const{widgets:r}=Q(),a=Ps(),{batteryData:o}=te(),l=Y(()=>{const c=[];return c.push({type:D.OwnershipHub,component:i(Lt,{children:i(pr,{})})}),e&&c.push({type:D.IncentiveHub,component:i(Lt,{children:i(gr,{})})}),r?.find(d=>d.name===z.CHARGE_MAP)&&a&&c.push({type:D.ChargeMap,component:i(Lt,{children:i(mr,{})})}),r?.find(d=>d.name===z.BATTERY_REPORT_BADGE)&&o?.id&&c.push({type:D.BatteryReportBadge,component:i(Lt,{children:i(vr,{})})}),c},[e,r,a,o?.id]);return i(fr,{items:l,openModal:t,setOpenModal:n,selectedVehicle:s||void 0,onClose:()=>n(null)})},hr=()=>{const{flags:e}=we(),{widgets:t}=Q(),n=e?.[ie.SRP_SAVINGS]?.enabled&&e?.[ie.SRP_SAVINGS]?.value===Te.SHOW,s=ms(t);return!(!n||!s)};function Er(e,t,n){const{getValidation:s,setValidations:r,hydrateFromLocalStorage:a}=Vt();x(()=>{a()},[]);const{cachedValidatedVehicles:o,uncachedVins:l,isValid:c}=Y(()=>{if(!n||n.length===0||!e||!t||!Array.isArray(n)||n.some(w=>typeof w!="string"||!w.trim()))return{cachedValidatedVehicles:[],uncachedVins:[],isValid:!1};const v=[],g=[];return n.forEach(w=>{s(w)?v.push(w):g.push(w)}),{cachedValidatedVehicles:v.map(w=>s(w)).filter(w=>w!==void 0),uncachedVins:g,isValid:!0}},[n,e,t,s]),d=c?`${Ee().VEHICLE}/${e}/vehicle/validate`:null,p=c&&l.length>0?JSON.stringify({vins:l}):null,_=Y(()=>!d||!p||l.length===0?null:[d,p],[d,p,l.length]),{data:f,error:m,isLoading:C}=Re(_,()=>he(d,{method:"POST",body:p}),{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1,dedupingInterval:1e3,errorRetryCount:0,errorRetryInterval:0});return x(()=>{if(c&&f?.data&&Array.isArray(f.data)&&l.length>0){Et("lf_country",e,1440);const v=f.data.filter(g=>g.vin&&g.is_valid!==void 0);v.length>0&&r(v)}},[f,l.length,e,r,c]),c?l.length===0?{data:{data:o,message:"All validations retrieved from cache",status:"success"},isLoading:!1,isError:!1}:{data:f?.data&&Array.isArray(f.data)?{data:[...o,...f.data],message:f.message||"",status:f.status||"success"}:f?{data:o,message:f.message||"",status:f.status||"success"}:void 0,isLoading:C,isError:m}:{data:void 0,isLoading:!1,isError:!0}}const Vs={vehicleSavings:De.VEHICLE_SAVINGS,battery:De.BATTERY,charging:De.CHARGING,chargeMap:De.CHARGE_MAP,srpSavings:De.SRP_SAVINGS,incentivesBanner:De.INCENTIVES_BANNER,batteryReportBadge:De.BATTERY_REPORT_BADGE};kt.PORTRAIT,kt.LANDSCAPE;const Ms=Nt(null),Ds=()=>{const e=Ct(Ms);if(!e)throw new Error("useSRPSavingsContext must be used within SRPSavingsProvider");return e},yr=({children:e})=>{const t=$t(w=>w.setSrpValidated),{address:n,provider:s}=Q(),r=Y(()=>We(s).placementUtils.getWidgetLocations(),[s]),[a,o]=T(new Set),[l,c]=T(),d=r.srpContainers,p=Be(),[_,f]=T(0),m=Fe(()=>{const w=document.querySelectorAll(d.query);c(w)},[d.query]);x(()=>{const w=()=>{f(h=>h+1)},b=()=>{f(h=>h+1)};let y=window.location.href;const S=setInterval(()=>{const h=window.location.href;h!==y&&(y=h,f(N=>N+1))},500);return window.addEventListener("popstate",w),window.addEventListener("hashchange",b),()=>{window.removeEventListener("popstate",w),window.removeEventListener("hashchange",b),clearInterval(S)}},[]),ci(()=>{m()},[p,_,m],200),x(()=>{ji(()=>{m()})},[m]),x(()=>{let w;const b=()=>{clearTimeout(w),w=window.setTimeout(()=>{m()},300)},y=new MutationObserver(S=>{let h=!1;for(const N of S){if(N.type==="childList"&&N.addedNodes.length>0){for(const O of N.addedNodes)if(O.nodeType===Node.ELEMENT_NODE){const P=O;if(P.matches?.(d.query)||P.querySelector?.(d.query)){h=!0;break}}}if(h)break}h&&b()});return y.observe(document.body,{childList:!0,subtree:!0}),()=>{y.disconnect(),clearTimeout(w)}},[m,d.query]);const C=Y(()=>l?Array.from(l).map(b=>{let y=null;return d.vinAttribute?y=b.getAttribute(d.vinAttribute)??null:d.vinQuery&&(y=b.querySelector(d.vinQuery)?.textContent??null),y&&b.setAttribute("data-lf-vin",y),{query:d.vinAttribute?`[${d.vinAttribute}="${y}"]`:d.vinQuery?`${d.query}[data-lf-vin="${y}"]`:"",id:`${Vs.srpSavings}-${y}`,vin:y}}):[],[l,d]);x(()=>{if(!C||C.length===0){o(new Set);return}const w=new Set;C.forEach(h=>{h.vin&&w.add(h.vin)});const b=Array.from(a).sort(),y=Array.from(w).sort();(b.length!==y.length||b.some((h,N)=>h!==y[N]))&&o(w)},[C]);const{data:u}=Er(n?.country,s,Array.from(a)),v=hr(),g=Y(()=>!v||!C||C.length===0||!u?[]:C.filter(b=>{const y=b.vin;return u.data.find(N=>N.vin===y)?.is_valid}),[v,C,u]);x(()=>{t(g.length>0,g.length)},[g.length,t]);const E={vins:a,containers:l,srpSavings:C,data:u,showSRPSavings:v,validatedContainers:g,widgetLocations:r,srpContainers:d};return!r.srpSavings||!r.srpContainers?null:i(Ms.Provider,{value:E,children:e})},Rt=(e,t)=>{t&&Object.entries(t).forEach(([n,s])=>{if(s&&typeof s=="string"){const r=di(n);e.style.setProperty(r,s,"important")}})},xt=(e,t,n,s)=>{n?.vin&&(e(n),t(D.OwnershipHub),s({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:D.SRPSavings,element_text:Qi("srp.savings.button")},eventId:j.SRP.SAVINGS.CTA_CLICK}))},br=()=>{const{setFoundVehicle:e,setOpenModal:t}=te(),{widgets:n}=Q(),s=X([]),r=X(),a=X(!1),o=ye(),{showSRPSavings:l,validatedContainers:c,widgetLocations:d,srpContainers:p}=Ds(),f=n?.find(u=>u.name===z.SRP_SAVINGS)?.style??void 0,m=()=>{!l||!c.length||(s.current.forEach(u=>{u.removeEventListener("click",C)}),s.current=[],c.forEach(u=>{const v=document.querySelector(u.query);if(!v)return;v.querySelectorAll(d.srpSavings.query).forEach(E=>{s.current.includes(E)||(E.addEventListener("click",C),s.current.push(E),E.classList.contains("hidden")&&E.classList.remove("hidden"),f&&E instanceof HTMLElement&&Rt(E,f))})}))},C=u=>{u.preventDefault(),u.stopPropagation(),a.current=!0;const v=u.currentTarget;let g=null,E=null;p.vinAttribute?(E=v.closest(`[${p.vinAttribute}]`),g=E?.getAttribute(p.vinAttribute)??null):p.vinQuery&&(E=v.closest(p.vinQuery),g=E?.textContent??null),g?(xt(e,t,{vin:g},o),window.setTimeout(()=>{a.current=!1},1e3)):a.current=!1};return x(()=>{if(l)return r.current&&clearTimeout(r.current),r.current=window.setTimeout(()=>{a.current||m()},100),()=>{r.current&&clearTimeout(r.current),s.current.forEach(u=>{u.removeEventListener("click",C)}),s.current=[]}},[l,c]),null},Nr=()=>{const{widgets:e}=Q(),t=e?.find(p=>p.name==="vehicleSavings"),n=Be(),s=t?.type===kt.LANDSCAPE,r=n||!s,a=r?"lf-flex-col lf-mt-3":"md:lf-gap-6 md:lf-flex-row lf-mt-4",o=r?"lf-w-full":"lf-w-[40%] lf-min-w-[310px] lf-max-w-[430px] lf-flex-shrink-0",l=r?"lf-w-full":"lf-w-[60%] lf-flex-1",d=(fs(t?.options)??{}).hideIncentives??!1;return i("div",{className:"lf-animate-pulse",children:[i("div",{className:`lf-flex lf-text-left ${r?"lf-flex-col":"lf-flex-row lf-items-start lf-justify-between"}`,children:[i("div",{className:"lf-bg-gray-6 lf-mb-2 lf-h-[30px] lf-w-[210px] lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-mb-3 lf-h-4 lf-w-[120px] lf-rounded"})]}),i("div",{className:`lf-flex lf-flex-col lf-gap-3 ${a}`,children:[i("div",{className:`${o} lf-space-y-3`,children:[i("div",{className:"lf-bg-accent-9 lf-mb-3 lf-h-[146px] lf-w-full lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-mb-3 lf-h-[36px] lf-w-full lf-rounded"}),i("div",{className:"lf-mb-3 lf-flex lf-items-center lf-gap-4",children:[i("div",{className:"lf-bg-gray-6 lf-h-8 lf-flex-1 lf-rounded"}),i("div",{className:"lf-flex lf-items-center lf-gap-2",children:[i("div",{className:"lf-bg-accent-9 lf-size-[32px] lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-6 lf-w-6 lf-rounded"}),i("div",{className:"lf-bg-accent-9 lf-size-[32px] lf-rounded"})]})]}),r&&i("div",{className:"lf-bg-gray-2 lf-h-14 lf-flex-1 lf-rounded"}),!r&&i(Ce,{children:[i("div",{className:"lf-bg-gray-6 lf-mb-3 lf-h-10 lf-w-full lf-rounded"}),i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-60 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-20 lf-rounded"})]})]})]}),i("div",{className:`${l} lf-space-y-3`,children:[!r&&i("div",{className:"lf-bg-gray-2 lf-h-14 lf-flex-1 lf-rounded"}),i("div",{className:"lf-bg-gray-2 lf-mb-3 lf-space-y-3 lf-rounded lf-p-4",children:[i("div",{className:"lf-mb-[38px] lf-flex lf-items-center lf-justify-between lf-py-3",children:[i("div",{className:"lf-bg-gray-6 lf-h-6 lf-w-[130px] lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-6 lf-w-20 lf-rounded"})]}),i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-32 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-20 lf-rounded"})]}),i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-36 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-20 lf-rounded"})]}),i("div",{className:"lf-mb-2 lf-flex lf-h-[40px] lf-w-full lf-items-center lf-justify-center lf-rounded lf-bg-white"})]}),!d&&i("div",{className:"lf-bg-gray-2 lf-mb-3 lf-space-y-3 lf-rounded lf-px-4 lf-py-[27px]",children:i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i("div",{className:"lf-bg-gray-6 lf-h-6 lf-w-1/3 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-6 lf-w-20 lf-rounded"})]})})]}),r&&i(Ce,{children:[i("div",{className:"lf-bg-gray-6 lf-mb-3 lf-h-10 lf-w-full lf-rounded"}),i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-60 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-4 lf-w-20 lf-rounded"})]})]})]})]})},Cr=()=>{const{provider:e}=Q(),t=We(e).cardUtils.getAttributesInnerCardClass();return i(Gt,{children:i("div",{className:"lf-flex-1 lf-animate-pulse",children:[i("div",{className:"lf-bg-gray-6 lf-mb-6 lf-h-6 lf-w-1/4 lf-rounded"}),i("div",{className:`lf-grid lf-w-full lf-grid-cols-2 lf-gap-6 md:lf-grid-cols-3 ${t}`,children:[...Array(6)].map((n,s)=>i("div",{className:"lf-flex lf-items-center lf-space-x-4",children:[i("div",{className:"lf-bg-gray-6 lf-size-12 lf-rounded"}),i("div",{className:"lf-flex-1 lf-space-y-2",children:[i("div",{className:"lf-bg-gray-6 lf-h-5 lf-w-3/4 lf-rounded"}),i("div",{className:"lf-bg-gray-6 lf-h-5 lf-w-1/3 lf-rounded"})]})]},s))})]})})},wr=()=>i(Gt,{children:i("div",{className:"lf-flex lf-animate-pulse lf-items-center",children:[i("div",{className:"lf-hidden lf-flex-1 lf-gap-4 md:lf-flex",children:[i("div",{className:"lf-bg-gray-6 lf-mr-1 lf-size-[42px] lf-rounded"}),i("div",{className:"lf-flex lf-flex-1 lf-items-center lf-gap-2",children:i("div",{className:"lf-bg-gray-6 lf-h-7 lf-w-[260px] lf-rounded"})})]}),i("div",{className:"lf-bg-gray-6 lf-h-[44px] lf-w-full lf-rounded md:lf-w-[268px]"})]})}),Sr=({widgetType:e})=>e==="vehicleSavings"?i(Nr,{}):e==="battery"||e==="charging"?i(Cr,{}):e==="chargeMap"?i(wr,{}):(console.warn(`No loading state implemented for widget type: ${e}`),null),at=({children:e,cardType:t,isLoading:n,type:s})=>{const{provider:r}=Q();let a="";const o=Y(()=>{const l=We(r).cardUtils.getCardClassNames({widgetName:t,type:s}),c=i(ns,{children:n?i(Sr,{widgetType:t}):e});a=l[1];const d=l.slice(2);return d.length>0?d.reduceRight((p,_)=>i("div",{className:_,children:p}),c):c},[e,t,n,r]);return i(Gt,{className:a,children:o})},Gs=(e,t,n)=>{if(t!==Bt.DEALER_COM||!e)return!1;const s=fs(e.options)??{},r=s[Bn.USE_CUSTOM_PLACEMENT]??!1,a=s[Bn.USE_CUSTOM_MOBILE_PLACEMENT]??!1;return n&&e.mobile_placement?!a:!r},Bs=async({query:e,name:t,dealerConfig:n,widgetId:s,setInjectionTarget:r,childIndex:a,entryType:o,disabled:l,type:c,attributes:d,isDealerComPlacement:p=!1})=>{try{const _=document.querySelector(`#${s}`);if(_)if(window.__LYTEFLO_EXTENSION_ID__)await _.remove();else return;const f=n.provider,m=We(f).cardUtils.getCardClassNames({widgetName:t,type:c}),u=`${xs(n)} ${s} ${m[0]}`.trim();if(f===Bt.DEALER_COM&&p){zi(s,u,e,E=>{r(E)},l);return}const v=await ui(e);if(!v)return;const g=document.createElement("div");if(g.setAttribute("id",s),g.setAttribute("data-notranslate","true"),g.setAttribute("class",u),d&&Object.entries(d).forEach(([E,w])=>{g.setAttribute(E,w)}),l&&g.setAttribute("style","display: none;"),typeof a=="number"&&a>=0){const E=v.children[a];E?E.insertAdjacentElement("beforebegin",g):v.appendChild(g)}else v.insertAdjacentElement(o??"afterend",g);r(g)}catch(_){throw console.error(`Failed to inject widget: ${_}`),_}},Ir=({children:e,name:t,containers:n})=>{const s=Q(),{widgets:r,id:a,provider:o}=s,l=Be(),c=$t(u=>u.setInjectionStatus),d=Y(()=>r.find(u=>u.name===t),[r,t]),[p,_]=T([]),f=X(null),m=X(l),C=Fe(async(u,v=!1)=>{if(!n||n.length===0){_([]),c(t,{injected:!1,attempted:!0,message:"No containers provided"});return}c(t,{injected:!1,attempted:!1,message:"Injection in progress"});const g=Gs(d,o,l),E=new Set(n.map(h=>h.id));_(v?h=>(h.forEach(N=>N.remove()),[]):h=>h.filter(N=>{const O=N.getAttribute("id"),P=O&&E.has(O);return P||N.remove(),P}));const w=n.filter(h=>document.querySelector(h.query)?v?!0:!document.getElementById(h.id):!1).map(h=>{const N=`${h.query} ${u?.query}`;return Bs({query:N,name:t,dealerConfig:s,widgetId:h.id,setInjectionTarget:O=>{_(P=>{const R=O.getAttribute("id"),q=P.findIndex(I=>I.getAttribute("id")===R);return q!==-1&&P[q].remove(),[...P,O]})},childIndex:u?.childIndex,entryType:u?.entry_type,disabled:!d?.enabled,type:d?.type,attributes:h.vin?{"data-vin":h.vin}:void 0,isDealerComPlacement:g})}),b=w.length;if(b===0){c(t,{injected:!1,attempted:!0,message:"No valid containers found"});return}const S=(await Promise.allSettled(w)).filter(h=>h.status==="fulfilled").length;S===b?c(t,{injected:!0,attempted:!0}):S>0?c(t,{injected:!0,attempted:!0,message:`Partial success: ${S}/${b} injections succeeded`}):c(t,{injected:!1,attempted:!0,message:`All ${b} injection attempts failed`})},[n,d,t,c,s,o,l]);return x(()=>{if(!a||!d?.enabled&&!window.__LYTEFLO_EXTENSION_ID__)return;const u=_s(d,o,t,l),v=f.current?.query!==u?.query||f.current?.childIndex!==u?.childIndex||f.current?.entry_type!==u?.entry_type,E=m.current!==l&&d?.mobile_placement&&v;u?(C(u,E),f.current=u,m.current=l):c(t,{injected:!1,attempted:!0,message:"No placement configuration found"})},[d,a,n,o,C,t,c,l]),i(Ce,{children:p.map(u=>yn(i(Ce,{children:e}),u))})},Or=()=>{const{t:e}=_e(),{provider:t,widgets:n}=Q(),{setFoundVehicle:s,setOpenModal:r}=te(),a=ye(),o=We(t).placementUtils.getWidgetLocations(),l=X(null),d=n?.find(f=>f.name===z.SRP_SAVINGS)?.style??void 0,p=Fe(f=>{l.current=f,f&&d&&Rt(f,d)},[d]);return x(()=>{if(l.current&&d)Rt(l.current,d);else if(d&&!l.current){const f=setInterval(()=>{l.current&&(Rt(l.current,d),clearInterval(f))},100);return window.setTimeout(()=>clearInterval(f),2e3),()=>clearInterval(f)}},[d]),i(it,{className:"lf-w-full",onClick:f=>{f.preventDefault(),f.stopPropagation();const m=f.currentTarget.closest(o.srpContainers.query);if(!o?.srpContainers?.vehicleAttribute&&!o?.srpContainers?.vinAttribute&&!o?.srpContainers?.vinQuery)return;const C=m?.getAttribute(o.srpContainers.vehicleAttribute??"");if(typeof C=="string"){const u=JSON.parse(C);u.vin&&xt(s,r,u,a)}else if(o?.srpContainers?.vinAttribute){const u=m?.getAttribute(o.srpContainers.vinAttribute??"");u&&xt(s,r,{vin:u},a)}else if(o?.srpContainers?.vinQuery){const u=m?.querySelector(o.srpContainers.vinQuery??"")?.textContent;u&&xt(s,r,{vin:u},a)}},ref:p,children:e("srp.savings.button")})},Ar=()=>{const{showSRPSavings:e,validatedContainers:t}=Ds();return!e||t.length===0?null:i(Ir,{name:"srpSavings",containers:t,children:i(at,{cardType:"srpSavings",children:i(Or,{})})})},Lr=()=>{const{provider:e}=Q();return i(yr,{children:e===Bt.DEALER_ON?i(br,{}):i(Ar,{})})},Hs=ds(e=>({l3ChargerIds:new Set,l2ChargerIds:new Set,chargerMap:new Map,successfulKeys:new Set,setL3ChargerIds:t=>e({l3ChargerIds:t}),setL2ChargerIds:t=>e({l2ChargerIds:t}),setChargerMap:t=>e({chargerMap:t}),setSuccessfulKeys:t=>e({successfulKeys:t})})),Tr=(e,t)=>!e||!t?0:e.powertrain===mt.PHEV?t===nt.METRIC?e.combined_range_km??100:e.combined_range_mi??100:t===nt.METRIC?e.range_km??100:e.range_mi??100,Rr=({chargerMap:e,l3ChargerIds:t,l2ChargerIds:n,setL3ChargerIds:s,setL2ChargerIds:r,setChargerMap:a,stationsData:o})=>{const l=new Map(e),c=[...Array.isArray(o.l3_charger_details)?o.l3_charger_details:[],...Array.isArray(o.l4_charger_details)?o.l4_charger_details:[]];if(c.length>0){const p=new Set(t);c.forEach(_=>{typeof _.latitude=="number"&&typeof _.longitude=="number"&&!p.has(_.id)&&(p.add(_.id),l.set(_.id,_))}),s(p)}const d=[...o.l2_charger_details||[]];if(d.length>0){const p=new Set(n);d.forEach(_=>{typeof _.latitude=="number"&&typeof _.longitude=="number"&&!p.has(_.id)&&(p.add(_.id),l.set(_.id,_))}),r(p)}a(l)};function sn(e,t,n,s,r,a){const o=e&&t&&n?bt(`${Ee().FUEL}/us/stations/electricity`,{lat:e,lon:t,distance:Math.round(n),distanceunit:s,maxResults:1e4,showTesla:r?"true":"false",includeStationLocations:a?"true":"false"}):null,l=async _=>{const f=await he(_);if(a&&f?.data){const m=Hs.getState();Rr({chargerMap:m.chargerMap,l3ChargerIds:m.l3ChargerIds,l2ChargerIds:m.l2ChargerIds,setL3ChargerIds:m.setL3ChargerIds,setL2ChargerIds:m.setL2ChargerIds,setChargerMap:m.setChargerMap,stationsData:f.data})}return{data:f.data}},{data:c,error:d,isLoading:p}=Re(o,l,{shouldRetryOnError:!1,keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:c,isLoading:p,isError:d}}function Do(e,t,n,s=!0){const{data:a,error:o,isLoading:l}=Re(null,async()=>{throw new Error("Valhalla URL is not configured")},{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});return{data:a,isLoading:l,isError:o}}const Go=7,Bo=14,Ho=4,Xn=500,$s=Nt(void 0),Fs=({children:e})=>{const[t,n]=T(null),[s,r]=T(null),[a,o]=T(0),[l,c]=T(0),[d,p]=T({latitude:0,longitude:0}),[_,f]=T(0),[m,C]=T(!1),[u,v]=T(!1),[g,E]=T(!1),[w,b]=T(0),{address:y,measurement:S}=Q(),[h,N]=T({total:0,l3:0,l2:0}),[O,P]=T({oneWay:null,roundTrip:null,lat:null,lon:null}),{selectedVehicle:R,openModal:q}=te(),{setL3ChargerIds:I,setL2ChargerIds:M,setChargerMap:H,setSuccessfulKeys:F}=Hs(),[se,pe]=T(q===D.ChargeMap);x(()=>{q===D.ChargeMap&&!se&&pe(!0)},[q,se]);const le=R,Se=oe=>({total:Number(oe.total_quantity)||0,l3:Number(oe.l3_quantity)||0,l2:Number(oe.l2_quantity)||0});x(()=>{if(!t)return;I(new Set),M(new Set),H(new Map),F(new Set),P({oneWay:null,roundTrip:null,lat:null,lon:null});const oe=Number(t.latitude)||0,ne=Number(t.longitude)||0;o(oe),c(ne),p({latitude:oe,longitude:ne})},[t,I,M,H,F]),x(()=>{y&&n(y)},[y]);const de=Tr(le,S);x(()=>{de&&f(de<Xn?de:Xn)},[de]);const A=O.lat===d.latitude&&O.lon===d.longitude,ae=O.oneWay===null||!A,re=u&&(!O.roundTrip||!A);x(()=>{O.lat!==null&&O.lon!==null&&!A&&P({oneWay:null,roundTrip:null,lat:null,lon:null})},[O.lat,O.lon,A]);const W={lat:d.latitude,lon:d.longitude,distanceUnit:ss(S),teslaNetwork:le?.tesla_network_availability??!1},{data:xe,isLoading:ve,isError:Ue}=sn(W.lat,W.lon,ae?_:0,W.distanceUnit,W.teslaNetwork,!1),{data:Ke,isLoading:ue,isError:He}=sn(W.lat,W.lon,re?_/2:0,W.distanceUnit,W.teslaNetwork,!1),{isLoading:Pe,isError:U}=sn(W.lat,W.lon,_,W.distanceUnit,W.teslaNetwork,se),G=ae&&ve||re&&ue||se&&Pe,V=ae&&Ue||re&&He||se&&U,$=(oe,ne)=>{P(K=>({...K,[ne]:oe,lat:d.latitude,lon:d.longitude}))},ce=(oe,ne,K,Ie)=>{if(!oe||!ne||K||!d.latitude||!d.longitude)return!1;const fe=Se(oe);return N(fe),$(fe,Ie),!0};return x(()=>{ce(xe?.data,ae,ve,"oneWay")},[xe,ae,ve,d.latitude,d.longitude]),x(()=>{ce(Ke?.data,re,ue,"roundTrip")},[Ke,re,ue,d.latitude,d.longitude]),x(()=>{if(ae||re||!A)return;const oe=u?O.roundTrip:O.oneWay;oe&&N(oe)},[u,O.oneWay,O.roundTrip,A,ae,re]),i($s.Provider,{value:{address:t,boundingBox:s,centerPin:d,latitude:a,longitude:l,hasError:V,searchRadius:_,chargersInBounds:w,isSearchedAddress:g,setIsSearchedAddress:E,vehicleRadius:de,isLoading:G,onlyLV3:m,roundTrip:u,setRoundTrip:v,setAddress:n,setBoundingBox:r,setOnlyLV3:C,setLatitude:o,setLongitude:c,setChargersInBounds:b,stationCount:m?h.l3:h.total,setUseFullData:pe},children:e})},Ws=()=>{const e=Ct($s);if(e===void 0)throw new Error("useChargeMap must be used within a ChargeMapProvider");return e};function $o(e,t,n,s){const r=JSON.stringify({config_id:e,data:t,lead_url:window.location.href,title:n,vin:s});return he(`${Ee().LEAD}/share`,{method:"POST",body:r})}function xr(e){const t=e?`${Ee().LEAD}/share/${e}`:null,{data:n,error:s,isLoading:r}=Re(t,t?()=>he(t):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:n?.data,isLoading:r,isError:!!s}}const Us=()=>{const e=window.location.search.split("lyteflo-share=")[1],{data:t}=xr(e),{setChargeAtHome:n,setAddress:s,setComparisonEfficiency:r,setComparisonVehicle:a,setDistance:o,setElectricityCost:l,setGasCost:c,setIncentives:d,setYears:p,setOpenModal:_,setFoundVehicle:f}=te();if(x(()=>{if(t){const{charge_at_home:m,address:C,comparison_efficiency:u,comparison_vehicle:v,selected_vehicle:g,distance:E,electricity_cost:w,gas_cost:b,incentives:y,years:S}=t?.data??{};m&&n(m),C&&s(C),v&&a(v),g&&f(g),E&&o(E),w&&l(w),b&&c(b),y&&Array.isArray(y)&&d(y),S&&p(S),u&&r(u),_(D.OwnershipHub)}},[t]),!e)return null},Pr=()=>{const{provider:e,widgets:t}=Q(),{openModal:n,setOpenModal:s,selectedVehicle:r}=te(),a=Be();Us();const o=Y(()=>{const l=c=>{switch(c){case"srpSavings":return i(Lr,{});default:return null}};return t?ps(t,e,a).filter(c=>In.includes(c.name)).map(c=>l(c.name)).filter(Boolean):[]},[e,t,a]);return i(Ce,{children:[o,i(ks,{showIncentives:!1,openModal:n,setOpenModal:s,selectedVehicle:dt(r)})]})},kr=()=>{const[e,t]=T(null);return i(bn,{fallback:null,children:i(Rs,{foundVehicle:e,setFoundVehicle:t,pageType:ge.SRP,children:i(Fs,{children:i(Pr,{})})})})},ft=({children:e,name:t})=>{const n=Q(),{widgets:s,id:r,provider:a}=n,{setInjectionStatus:o,hasAttempted:l}=$t(),c=Be(),d=Y(()=>s.find(C=>C.name===t),[s,t]),[p,_]=T(null),f=X(null),m=X(c);return x(()=>{if(!r||!d?.enabled&&!window.__LYTEFLO_EXTENSION_ID__)return;const C=_s(d,a,t,c),u=f.current?.query!==C?.query||f.current?.childIndex!==C?.childIndex||f.current?.entry_type!==C?.entry_type,g=m.current!==c&&d?.mobile_placement&&(u||!l(t));if(C){if(g&&p&&(p.remove(),_(null),o(t,{injected:!1,attempted:!1})),!l(t)||g){o(t,{injected:!1,attempted:!1});const E=Gs(d,a,c);Bs({query:C?.query,name:t,dealerConfig:n,widgetId:Vs[t],setInjectionTarget:w=>{_(w),o(t,{injected:!0,attempted:!0})},childIndex:C?.childIndex,entryType:C?.entry_type,disabled:!d?.enabled,type:d?.type,isDealerComPlacement:E}).catch(w=>{o(t,{injected:!1,attempted:!0,message:w instanceof Error?w.message:"Unknown injection error"})})}f.current=C,m.current=c}else o(t,{injected:!1,attempted:!0,message:"No placement configuration found"})},[d,r,t,o,l,n,a,c,p]),i(Ce,{children:p&&yn(i(Ce,{children:e}),p)})};var ke=(e=>(e.REPORT="report",e.ELIGIBILITY="eligibility",e.EV_EXPERT="ev_expert",e.BATTERY_REPORT="battery_report",e))(ke||{}),Le=(e=>(e.OPEN="OPEN",e.CLOSE="CLOSE",e.SUBMIT="SUBMIT",e.ENGAGE_NAME="ENGAGE_NAME",e.ENGAGE_EMAIL="ENGAGE_EMAIL",e.ENGAGE_PHONE="ENGAGE_PHONE",e.CLICK_TO_CALL="CLICK_TO_CALL",e))(Le||{});const Vr=e=>B("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",fill:"none",...e},B("path",{d:"M1.66675 5.83325L8.47085 10.5961C9.02182 10.9818 9.29731 11.1746 9.59697 11.2493C9.86166 11.3153 10.1385 11.3153 10.4032 11.2493C10.7029 11.1746 10.9783 10.9818 11.5293 10.5961L18.3334 5.83325M5.66675 16.6666H14.3334C15.7335 16.6666 16.4336 16.6666 16.9684 16.3941C17.4388 16.1544 17.8212 15.772 18.0609 15.3016C18.3334 14.7668 18.3334 14.0667 18.3334 12.6666V7.33325C18.3334 5.93312 18.3334 5.23306 18.0609 4.69828C17.8212 4.22787 17.4388 3.84542 16.9684 3.60574C16.4336 3.33325 15.7335 3.33325 14.3334 3.33325H5.66675C4.26662 3.33325 3.56655 3.33325 3.03177 3.60574C2.56137 3.84542 2.17892 4.22787 1.93923 4.69828C1.66675 5.23306 1.66675 5.93312 1.66675 7.33325V12.6666C1.66675 14.0667 1.66675 14.7668 1.93923 15.3016C2.17892 15.772 2.56137 16.1544 3.03177 16.3941C3.56655 16.6666 4.26662 16.6666 5.66675 16.6666Z",stroke:"currentColor",strokeWidth:1.66667,strokeLinecap:"round",strokeLinejoin:"round"})),Tn=()=>{const{flags:e}=we();return e?.[ie.ICON_COLOR]?.enabled&&e?.[ie.ICON_COLOR]?.value===Te.SHOW?{fill:fi}:{fill:"transparent"}},Mr=()=>{const{flags:e}=we();return e?.[ie.LEAD_PHONE_NUMBER]?.enabled&&e?.[ie.LEAD_PHONE_NUMBER]?.value===Te.SHOW},js=({name:e,email:t,phoneNumber:n,configId:s,data:r,title:a,vin:o,tcpaDisclaimer:l,ccpaDisclaimer:c,url:d})=>{const p={config_id:s,data:r,email:t,lead_url:window.location.href,lead_language:Wt.language,name:e,title:a,vin:o};return n&&(p.phone=_i(n)),l&&(p.tcpa=l,p.tcpa_consent=!0),c&&(p.ccpa=c,p.ccpa_consent=!0),d&&(p.url=d),p};function Dr({name:e,email:t,phoneNumber:n,configId:s,data:r,title:a,vin:o,tcpaDisclaimer:l,ccpaDisclaimer:c}){const d=js({name:e,email:t,phoneNumber:n,configId:s,data:r,title:a,vin:o,tcpaDisclaimer:l,ccpaDisclaimer:c});return he(`${Ee().LEAD}/report`,{method:"POST",body:d})}function Gr({name:e,email:t,phoneNumber:n,configId:s,data:r,title:a,vin:o,tcpaDisclaimer:l,ccpaDisclaimer:c}){const d=js({name:e,email:t,phoneNumber:n,configId:s,data:r,title:a,vin:o,tcpaDisclaimer:l,ccpaDisclaimer:c});return he(`${Ee().LEAD}/eligibility`,{method:"POST",body:d})}function Br({name:e,email:t,url:n,reportId:s,language:r,title:a,tcpaDisclaimer:o,ccpaDisclaimer:l}){const c={name:e,email:t,report_id:s,url:n,language:r,title:a};return o&&(c.tcpa=o,c.tcpa_consent=!0),l&&(c.ccpa=l,c.ccpa_consent=!0),he(`${Ee().LEAD}/battery_report_share`,{method:"POST",body:c})}const Hr=()=>{const{fill:e}=Tn();return i("div",{className:"lf-pointer-events-none lf-absolute lf-inset-0",children:[...Array(50)].map((t,n)=>{const s=Math.random()*360-180,r=Math.random()*360-180,a=Math.random()*360-180,o=Math.random()*360,l=Math.random()*360,c=Math.random()*360,d=Math.random()*.5+.8,p=Math.random()*.5+.8,_=Math.random()*20-10,f=Math.random()*4;return i(is,{fill:e,width:40,height:40,className:"lf-animate-flutter",style:{left:`${Math.random()*90}%`,animationDelay:`${f}s`,"--start-rotateX":`${s}deg`,"--start-rotateY":`${r}deg`,"--start-rotateZ":`${a}deg`,"--end-rotateX":`${o}deg`,"--end-rotateY":`${l}deg`,"--end-rotateZ":`${c}deg`,"--scaleX":d,"--scaleY":p,"--skewX":`${_}deg`}},n)})})},$r=({setIsSuccessScreen:e,type:t,vin:n})=>{const{t:s}=_e(),{closeModal:r}=pi(),a=ye(),o=t==="report"?gi:mi;if(!n)return null;const l=xn(t,n),c=()=>{e(!1),localStorage.removeItem(l),a({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"popup",element_subtype:"cta_button",event_action:"click",event_action_result:"restart",product_name:D.SavingsHub,element_text:s(`vehicle_savings.${t}.success_subtitle`)},eventId:j.VDP.VEHICLE_SAVINGS.PII.SUCCESS.CLEAR_STORAGE})};return i(Ce,{children:[i(o,{className:"lf-text-accent lf-mb-4"}),i(L,{size:"5",className:"lf-mb-2 lf-text-center lf-font-medium",children:s(`vehicle_savings.${t}.success_title`)}),i(as,{className:"lf-text-default lf-text-center lf-underline",size:"2",onClick:c,children:s(`vehicle_savings.${t}.success_subtitle`)}),i(it,{className:"lf-mt-6 lf-w-full",onClick:r,children:s(`vehicle_savings.${t}.success_cta`)})]})},Rn=Nn(({buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r="3",triggerClassName:a,onSuccess:o,hideTrigger:l=!1},c)=>{const[d,p]=T(""),[_,f]=T(""),[m,C]=T(""),[u,v]=T(null),[g,E]=T(!1),[w,b]=T(!1),[y,S]=T(!1),h=Q(),{t:N}=_e(),O=ye(),{fill:P}=Tn(),R=Mr(),q=R?"vehicle_savings.authorization_both":"vehicle_savings.authorization_email",{address:I,batteryData:M,chargeAtHome:H,comparisonEfficiency:F,distance:se,electricityCost:pe,incentives:le,gasCost:Se,years:de,vin:A,selectedVehicle:ae,comparisonVehicle:re}=te();x(()=>{window.lfSetTimeout&&window.setTimeout!==window.lfSetTimeout&&(window.setTimeout=window.lfSetTimeout)},[w]);const W=xn(s,s===ke.BATTERY_REPORT?null:A),[xe,ve]=T(!!ct(W)),Ue=V=>({name:_,email:d,phoneNumber:R?m:void 0,configId:h.id||"",data:{address:I||void 0,charge_at_home:H,comparison_efficiency:F||void 0,config:h,distance:se,electricity_cost:pe||void 0,incentives:le,gas_cost:Se||void 0,years:de,selected_vehicle:ae,comparison_vehicle:re},title:N(`vehicle_savings.${s}.lead_title`),vin:V}),Ke=V=>{if(!A)return;v(null),V.preventDefault(),E(!0);const $=N(q,{buttonText:e,dealership:h.name}),ce=R?$:void 0;let oe,ne,K;s===ke.BATTERY_REPORT&&M?.publicReportHashKey&&M?.id&&(K=Wt.language||"en",oe=Ni(M.publicReportHashKey,K),ne=M.id),(()=>{if(s===ke.BATTERY_REPORT){if(oe&&ne&&K)return Br({name:_,email:d,url:oe,reportId:ne,language:K,title:N(`vehicle_savings.${s}.lead_title`),tcpaDisclaimer:ce,ccpaDisclaimer:$});throw new Error("Battery report data is missing required fields")}else return s===ke.REPORT?Dr({...Ue(A),ccpaDisclaimer:$,tcpaDisclaimer:ce}):Gr({...Ue(A),ccpaDisclaimer:$,tcpaDisclaimer:ce})})().then(()=>{Et(W,!0,60*24);const fe=ot(s,n,Le.SUBMIT);if(O({eventName:J.ASC_FORM_SUBMISSION,parameters:{element_text:N(`vehicle_savings.${s}.button`),product_name:n,comm_type:"form",department:"sales",form_name:`${s} ${n}`,form_type:"consumer_contact",comm_outcome:"opportunity",submission_id:0},eventId:fe}),O({eventName:Je.LYTEFLO_LEAD_SUBMISSION,parameters:{element_text:N(`vehicle_savings.${s}.button`),product_name:n,comm_type:"form",department:"sales",form_name:`${s} ${n}`,form_type:"consumer_contact",comm_outcome:"opportunity",submission_id:0},eventId:fe}),o){b(!1),o(),E(!1);return}else ve(!0),S(!0)}).catch(fe=>{const $e=fe instanceof Error?fe.message:N(`vehicle_savings.${s}.error`);v($e)}).finally(()=>{E(!1)})},ue=()=>{S(!1),O({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"popup",element_subtype:"toggle",event_action:"close",event_action_result:"close"},eventId:ot(s,n,Le.CLOSE)})},He=()=>{if(w)return;b(!0);const V=ot(s,n,Le.OPEN);O({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:n,element_text:N(`vehicle_savings.${s}.trigger`)},eventId:V}),O({eventName:Je.LYTEFLO_LEAD_FORM_OPEN,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:n,element_text:N(`vehicle_savings.${s}.trigger`)},eventId:V})},Pe=Fe(()=>{if(w)return;if(!!ct(W)&&s===ke.BATTERY_REPORT&&o){o();return}b(!0);const $=ot(s,n,Le.OPEN);O({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:n,element_text:N(`vehicle_savings.${s}.trigger`)},eventId:$}),O({eventName:Je.LYTEFLO_LEAD_FORM_OPEN,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:n,element_text:N(`vehicle_savings.${s}.trigger`)},eventId:$})},[w,b,s,n,N,O,W,o]);Fi(c,()=>({open:Pe}),[Pe]);const U=(V,$)=>{O({eventName:J.ASC_FORM_ENGAGEMENT,parameters:{product_name:n,comm_type:"form",comm_status:"send",department:"sales",form_name:V,form_type:"consumer_contact",element_text:""},eventId:$}),O({eventName:Je.LYTEFLO_LEAD_FORM_INTERACTION,parameters:{product_name:n,comm_type:"form",comm_status:"send",department:"sales",form_name:V,form_type:"consumer_contact",element_text:""},eventId:$})},G=V=>{const $=ot(s,n,V);let ce="";switch(V){case Le.ENGAGE_NAME:ce=`${s} ${N("vehicle_savings.name")}`;break;case Le.ENGAGE_EMAIL:ce=`${s} ${N("vehicle_savings.email")}`;break;case Le.ENGAGE_PHONE:ce=`${s} ${N("vehicle_savings.phone")}`;break}U(ce,$)};return i("div",{children:[!l&&i(it,{className:`lf-flex lf-w-full lf-items-center lf-justify-center lf-px-4 lf-styled-button ${a}`,onClick:He,size:r,children:N(`vehicle_savings.${s}.trigger`)}),i(vi,{onClose:ue,contentClassName:`md:lf-w-[400px] lf-${h.oem}-widget lf-${h.provider}-widget`,isOpen:w,setIsOpen:b,children:i("div",{className:"lf-p-4 md:lf-p-8",children:[i("div",{className:"lf-flex lf-flex-col lf-items-center",children:xe?i($r,{productName:n,setIsSuccessScreen:ve,type:s,vin:A||void 0,buttonText:e,triggerText:t}):i(Ce,{children:[s===ke.BATTERY_REPORT?i(hi,{fill:P,width:64,height:64,className:"lf-mb-4"}):i(Ei,{fill:P,width:56,height:56,className:"lf-mb-4"}),i(L,{size:"6",className:"lf-mb-2 lf-text-center lf-font-medium",children:N(`vehicle_savings.${s}.title`)}),i(L,{size:"2",className:"lf-mb-6 lf-text-center",children:R&&s===ke.BATTERY_REPORT?N(`vehicle_savings.${s}.subtitle_with_phone`):N(`vehicle_savings.${s}.subtitle`)}),i("form",{className:"lf-w-full lf-space-y-4 lf-overflow-y-hidden",onSubmit:Ke,children:[i(zt,{placeholder:N("vehicle_savings.name"),onChange:V=>f(V),type:"text",required:!0,name:"name",value:_,onFocus:()=>{G(Le.ENGAGE_NAME)}}),i(zt,{placeholder:N("vehicle_savings.email"),onChange:V=>p(V),type:"email",required:!0,name:"email",value:d,onFocus:()=>{G(Le.ENGAGE_EMAIL)}}),R&&i(zt,{placeholder:N("vehicle_savings.phone"),onChange:V=>C(yi(V)),type:"phone",name:"phone",value:m,onFocus:()=>{G(Le.ENGAGE_PHONE)}}),i(it,{className:"lf-flex lf-w-full lf-items-center lf-justify-center lf-px-4 lf-styled-button",isLoading:g,disabled:!d||!_||R&&!m,size:"3",type:"submit",children:i("div",{className:"lf-relative lf-flex lf-w-full lf-items-center lf-justify-center",children:[i(Vr,{className:"lf-absolute lf-left-0"}),i(L,{size:"3",children:N(`vehicle_savings.${s}.button`)})]})}),u&&i(L,{as:"div",size:"1",className:"lf-text-center lf-text-[var(--red-11)]",children:u}),i(L,{as:"div",size:"1",className:"lf-text-center",children:i(gs,{i18nKey:q,components:[i(bi,{className:"lf-underline",size:"1",href:"https://www.lyteflo.com/privacy",target:"_blank",rel:"noreferrer",variant:"dark",productName:n},"privacy")],values:{dealership:h.name,buttonText:e}})})]})]})}),y&&i(Hr,{})]})})]})});Rn.displayName="DesktopPII";const zs=Nn(({buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r="3",triggerClassName:a,onSuccess:o,hideTrigger:l},c)=>{const d=Q(),{t:p}=_e(),_=ye(),f=d.phone_numbers?.find(C=>C.key==="sales"),m=()=>{if(f?.value){const C=ot(s,n,Le.CLICK_TO_CALL);window.location.href=`tel:${f.value}`,_({eventName:J.ASC_CLICK_TO_CALL,parameters:{product_name:n,comm_phone_number:f.value,department:"sales"},eventId:C})}};return s==="ev_expert"&&f?.value?i(it,{className:"lf-w-full lf-styled-button",onClick:m,size:r,children:p(`vehicle_savings.${s}.trigger`)}):i(Rn,{ref:c,buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r,triggerClassName:a,onSuccess:o,hideTrigger:l})});zs.displayName="MobilePII";const xn=(e,t)=>`lf-submitted-${e}-${t??""}`,ot=(e,t,n)=>{const s=j.VDP.VEHICLE_SAVINGS.PII,r=s[e];if(typeof r=="object"&&r!==null&&t in r){const a=r[t];if(typeof a=="object"&&a!==null&&n in a)return a[n]}return n===Le.OPEN?s.CTA_OPEN:n===Le.SUBMIT?s.SUBMIT:""},Ut=Nn(({buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r="3",triggerClassName:a,onSuccess:o,hideTrigger:l},c)=>Be()?i(zs,{ref:c,buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r,triggerClassName:a,onSuccess:o,hideTrigger:l}):i(Rn,{ref:c,buttonText:e,triggerText:t,productName:n,type:s,triggerSize:r,triggerClassName:a,onSuccess:o,hideTrigger:l}));Ut.displayName="PII";const Fr=[1,3],Wr="2025-09-30",Ur=7500,jr=()=>{const{flags:e}=we();return!!(e?.[ie.INCENTIVES_BANNER]?.enabled&&e?.[ie.INCENTIVES_BANNER]?.value===Te.SHOW)},zr=({incentives:e})=>{const{t}=_e(),n=jr(),{currency:s,provider:r}=Q(),a=Ci(Wr),[o,l]=T(void 0),[c,d]=T(void 0),{selectedVehicle:p,widgets:_}=te(),f=X(null),m=Be();if(x(()=>{const y=()=>{try{const O=We(r).placementUtils.getWidgetLocations()?.bannerContainers;if(!O){l(void 0);return}const P=document.querySelector(O.headerQuery),R=document.querySelector(O.contentQuery);if(P&&R){const q=P.offsetTop,I=P.offsetHeight,M=R.offsetTop,H=getComputedStyle(R),F=parseFloat(H.paddingTop)||0,se=q+I-(M+F),pe=Math.max(0,se);l(pe)}else l(0)}catch(N){console.error(N),l(0)}},S=()=>{f.current&&d(f.current.clientWidth)};y(),S();const h=()=>{y(),S()};return window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[r,f.current]),!n)return null;const{incentive:C,isDefaultIncentive:u}=Y(()=>{let y=e?.[0],S=!1;if(!y)if(_?.incentivesBanner?.alwaysShowOnNew)S=!0,y={max_value:Ur};else return{incentive:null,isDefaultIncentive:!1};return{incentive:y,isDefaultIncentive:S}},[e,_]);if(!C||a<0)return null;const v=m?"3":"4",g=c&&c>1e3,E=g?"lf-flex-row":"lf-flex-col",w=g?"lf-justify-center":"lf-justify-between",b=r!==Bt.DEALER_COM?"lf-rounded-none":"";return i(st,{asChild:!0,variant:"ghost",size:"1",children:i("div",{className:`lf-flex lf-w-full lf-h-full lf-items-center lf-bg-accent-9 lf-gap-6 lf-py-2 lf-px-4 lf-text-contrast lf-m-0 ${w} ${b}`,style:{marginTop:o?`${o}px`:void 0},ref:f,children:[i("div",{className:`lf-flex lf-gap-2 ${E}`,children:[i(L,{as:"div",size:v,children:t(p?.new_used==="new"&&!u?"incentives.is_qualified":"incentives.may_qualify",{amount:Ae(C.max_value,s,0)})}),i(L,{as:"div",size:v,children:i(gs,{className:"lf-text-contrast",i18nKey:"incentives.expires_in",components:[i(L,{className:"lf-p-0 lf-font-extrabold",size:v,children:a},"days_left")],values:{amount:Ae(C.max_value,s,0),days:a.toString()}})})]}),i(Ut,{type:ke.ELIGIBILITY,productName:D.IncentiveBanner,buttonText:t("incentives.button"),triggerText:t(m?"incentives.button":"incentives.trigger"),triggerSize:v,triggerClassName:m?"lf-py-2 !lf-h-[unset]":"lf-text-xl !lf-h-[unset]"})]})})},Yr=()=>{const{incentiveData:e,widgets:t,selectedVehicle:n}=te(),s=(e?.data?.data??[]).filter(a=>Fr.includes(Number(a.id))&&!a.not_applicable),r=t?.incentivesBanner?.alwaysShowOnNew;return!s?.length&&(!r||n?.new_used!=="new")?null:i(ft,{name:"incentivesBanner",children:i(at,{cardType:"incentivesBanner",children:i(zr,{incentives:s})})})};function qr(e,t,n,s,r){const{hydrateFromLocalStorage:a}=Vt(),o=Vt(m=>n?m.validations.get(n)?.validation_key:void 0);x(()=>{a()},[a]);const l=async m=>{if(!n||!t||e||!o)return null;const C=`${Ee().BATTERY}/battery/reports/vehicles/${o}?full=${s}&configuration_id=${r}`;return(await he(C)).data},c=n&&t&&!e&&o?`battery-data-${t}-${n}-${o}-${s}`:null,{data:d,error:p,isLoading:_,mutate:f}=Re(c,l,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});return{data:d??void 0,isLoading:_,error:p,mutate:f}}const Kr=e=>B("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:22,viewBox:"0 0 24 22",fill:"none",...e},B("path",{d:"M2 17.5L7 12.5L2 7.5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),B("path",{d:"M9 17.5L14 12.5L9 7.5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),B("path",{d:"M16 17.5L21 12.5L16 7.5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),Zr=()=>{const{flags:e}=we();return e?.[ie.BATTERY_REPORT_LEAD]?.enabled&&e?.[ie.BATTERY_REPORT_LEAD]?.value===Te.SHOW},Xr=()=>{const{batteryData:e,widgets:t,setOpenModal:n}=te(),{t:s}=_e(),r=ye(),a=X(null),o=X(null),l=Zr(),c=xn(ke.BATTERY_REPORT,null),d=!!ct(c),[p,_]=T(!1);if(x(()=>{_(d||!l)},[d,l]),!e)return null;const f=t?.batteryBadge?.useAccentColor,m=f?"lf-bg-contrast lf-border-accent":"lf-bg-gray-12 lf-border-gray-12",C=f?"lf-text-[var(--accent-9)]":"lf-text-green",u=f?"lf-text-[var(--accent-contrast)]":"lf-text-gray-12",v=f?"lf-bg-[var(--accent-9)]":"lf-bg-green",g=f?"lf-text-[var(--accent-surface)]":"lf-text-white",E=a.current?.clientHeight??40,w=()=>{r({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:D.BatteryReportBadge},eventId:j.VDP.BATTERY_REPORT_BADGE.CTA_OPEN}),n(D.BatteryReportBadge),_(!0)},b=()=>{p?w():o.current&&o.current.open()},y=s(p?"battery_report_badge.score":"battery_report_badge.report");return i(Ce,{children:[!p&&i(Ut,{ref:o,type:ke.BATTERY_REPORT,productName:D.SavingsHub,buttonText:s("vehicle_savings.battery_report.button"),triggerText:s("battery_report_badge.click_to_open"),hideTrigger:!0,onSuccess:w}),i(as,{className:"lf-w-full !lf-p-0 lf-styled-button",onClick:b,children:i(st,{className:`lf-m-0 lf-p-0 lf-w-full lf-border-2 lf-border-solid ${m}`,variant:"ghost",children:[i("div",{className:"lf-flex lf-gap-2 lf-items-center lf-p-2",children:[p&&i(L,{className:C,style:{fontSize:`${E}px`,height:`${E}px`,lineHeight:`${E}px`},size:"2",children:Math.floor(e.score||0)}),i("div",{className:"lf-flex lf-gap-0.5 lf-flex-col",ref:a,children:[i(wi,{height:18,width:58,className:g}),i(L,{size:"2",className:`lf-font-bold lf-uppercase ${C}`,children:y})]})]}),i("div",{className:`lf-flex lf-items-center lf-justify-between lf-px-1 ${v} ${u}`,children:[i(L,{size:"2",className:"lf-font-bold lf-uppercase lf-my-1",children:s("battery_report_badge.click_to_open")}),i(Kr,{className:"lf-w-6 lf-h-[22px]"})]})]})})]})},Jr=()=>{const e=Q(),{batteryData:t,address:n,selectedVehicle:s,openModal:r,setBatteryData:a,widgets:{batteryBadge:o}}=te(),l=Vt(f=>s?.vin?f.validations.get(s.vin)?.validation_key:void 0),[c,d]=T(r===D.BatteryReportBadge),p=Y(()=>!!window.__LYTEFLO_EXTENSION_ID__,[]);x(()=>{r===D.BatteryReportBadge&&!c&&d(!0)},[r,c]);const _=qr(p,n?.country,s?.vin,c,e?.id);return x(()=>{if(!t&&s?.vin&&p&&o&&e?.id){const f=dt(s);f&&a(Si(Yn(e),Ha(f),Number(o.demoScore)||95,o.demoHasCellIssues?kn.CELL_ISSUE:kn.HEALTHY_CELLS))}},[s,p,o,t,e]),x(()=>{if(!p&&_?.data){if(_.data.battery_report_vehicle&&e?.id)a(Ii({..._.data,configuration:Yn(e)}));else if(!c){const f=_.data?.validation_key||l||void 0;a({id:_.data?.id,score:_.data?.score,publicReportHashKey:f})}}},[_?.data,p,e,c]),t?i(ft,{name:"batteryReportBadge",children:i(at,{cardType:"batteryReportBadge",children:i(Xr,{})})}):null},Qr=e=>B("svg",{width:30,height:30,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("g",{filter:"url(#filter0_d_4595_11332)"},B("rect",{className:"lf-fill-contrast",x:3,y:1,width:24,height:24,rx:12,shapeRendering:"crispEdges"}),B("rect",{x:3.5,y:1.5,width:23,height:23,rx:11.5,shapeRendering:"crispEdges"}),B("path",{className:"lf-fill-accent",d:"M13.9556 14.0282H11.5364C11.3966 14.0282 11.3146 13.8721 11.3948 13.7585L15.7293 7.61883C15.8262 7.48157 16.0437 7.54955 16.0437 7.7171V11.9718H18.4629C18.6027 11.9718 18.6846 12.1278 18.6045 12.2414L14.27 18.3811C14.1731 18.5183 13.9556 18.4504 13.9556 18.2828V14.0282Z"})),B("defs",null,B("filter",{id:"filter0_d_4595_11332",x:0,y:0,width:30,height:30,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},B("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),B("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),B("feOffset",{dy:2}),B("feGaussianBlur",{stdDeviation:1.5}),B("feComposite",{in2:"hardAlpha",operator:"out"}),B("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),B("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_4595_11332"}),B("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_4595_11332",result:"shape"})))),jt=({children:e,name:t,type:n,className:s})=>{const{provider:r}=Q(),a=We(r).headerUtils.getHeaderType(t,n);return a.as==="h4"?i("h4",{className:`${a.className} lf-header ${s}`,children:e}):a.as==="h3"?i("h3",{className:`${a.className} lf-header ${s}`,children:e}):a.as==="h2"?i("h2",{className:`${a.className} lf-header ${s}`,children:e}):i(L,{as:a.as,className:`${a.className} lf-header ${s}`,children:e})},eo=()=>{const{t:e}=_e(),{setOpenModal:t}=te(),n=ye(),{stationCount:s,setUseFullData:r}=Ws(),a=X(null),[o,l]=T(!0),c=500;x(()=>{const _=()=>{if(a.current){const m=a.current.offsetWidth;l(m<c)}};_();const f=new ResizeObserver(_);return a.current&&f.observe(a.current),()=>{f.disconnect()}},[]),x(()=>{if(!a.current)return;const _=new IntersectionObserver(([f],m)=>{f?.isIntersecting&&(r(!0),m.disconnect())},{threshold:.1});return _.observe(a.current),()=>{_.disconnect()}},[]);const d=s>0?e("charge_map.nearby",{count:s}):e("charge_map.find_chargers"),p=()=>{t(D.ChargeMap),n({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",product_name:"ChargeMap",event_action_result:"popup",element_text:d},eventId:j.VDP.CHARGE_MAP.CTA_OPEN})};return i("div",{className:"lf-flex lf-items-center lf-gap-4",ref:a,children:[!o&&i("div",{className:"lf-flex lf-flex-1 lf-items-center",children:[i(Qr,{width:48,height:48,className:"lf-mr-2"}),i("div",{className:"lf-flex lf-flex-1 lf-flex-col",children:i(jt,{name:"chargeMap",children:e("charge_map.title")})})]}),i(it,{onClick:p,className:`${o?"lf-w-full":"lf-p-4"} lf-styled-button`,fitToContent:!o,size:"3",children:d})]})},to=()=>{const{hasError:e}=Ws(),{hasVehicleSavingsError:t}=te(),[n,s]=T(!1),r=Ps();return x(()=>{(e||t)&&s(!0)},[e,t]),!r||n?null:i(ft,{name:"chargeMap",children:i(at,{cardType:"chargeMap",children:i(eo,{})})})},Ys=({children:e})=>{const{name:t}=Q(),{t:n}=_e(),s=ye(),r=a=>{a&&s({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_icon",event_action:"hover",event_action_result:"open",product_name:D.EvInsights,element_state:"inactive",element_title:n("vehicle_savings.disclaimer.title"),element_text:"tooltip",element_value:""},eventId:j.VDP.EV_ATTRIBUTES.DISCLAIMER.TOOLTIP_OPEN})};return i("div",{className:"lf-relative",children:[e,i(ut,{className:"lf-absolute lf-right-0 lf-top-0 lf-z-10 !lf-m-0",title:n("vehicle_savings.disclaimer.title"),toggle:"hover",onOpenChange:r,children:i("div",{className:"md:lf-w-[350px]",children:[i(L,{size:"3",as:"div",className:"lf-mb-4 lf-font-bold",children:n("ev_attributes.disclaimer.header")}),i(L,{size:"2",as:"div",children:n("ev_attributes.disclaimer.description",{name:t})})]})})]})},Ze=({className:e,title:t,value:n,icon:s,tooltipText:r,subtitle:a,superscript:o})=>{const l=ye(),c=p=>{p&&l({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_icon",event_action:"hover",event_action_result:"open",product_name:"EvInsights",element_state:"inactive",element_title:t,element_text:r,element_value:""},eventId:j.VDP.EV_ATTRIBUTES.ATTRIBUTE.TOOLTIP_OPEN})},d=Be();return i("div",{className:`lf-flex lf-items-center lf-space-x-4 ${e}`,children:[i("div",{className:"lf-size-12",children:s}),i("div",{className:"lf-flex-1",children:[i(L,{as:"div",size:d?"1":"2",className:"lf-text-gray-11 lf-font-medium lf-uppercase",children:t}),i(L,{as:"div",size:d?"3":"4",className:"lf-flex lf-gap-1 lf-justify-start lf-items-center lf-relative lf-font-medium",children:[n,r&&i(ut,{className:"lf-ml-1",title:r,toggle:"hover",onOpenChange:c,children:i(L,{size:"2",as:"div",className:"lf-w-full lf-pt-10 md:lf-w-[200px] md:lf-pt-0",children:r})}),o&&i("sup",{className:"lf-leading-none lf-self-start lf-text-xs ",children:o})]}),a&&i(L,{as:"div",size:"2",className:"lf-text-gray-11",children:a})]})]})},Xe=({iconType:e,className:t})=>{const{flags:n}=we(),s=n?.[ie.ACCENT_ATTRIBUTES]?.enabled&&n?.[ie.ACCENT_ATTRIBUTES]?.value===Te.SHOW;return i(Oi,{iconType:e,className:t,fill:s?"var(--accent-a6)":"#F0F0F0",stroke:s?"var(--lyteflo-attribute-icon-stroke, #8D8D8D)":"#8D8D8D"})},qs=(e,t)=>{const{selectedVehicle:n}=te();return Y(()=>{if(!n)return{options:[],keys:[],capacity:"",maxPower:null};const s=dt(n),r=s?Ai(e,t,s):null,a=r?.options?.[0];let o="",l;if(a?.capacity_kwh){const c=a.capacity_kwh.match(/^([\d.]+)/);o=c?c[1]:""}else{const c=Li(String(n.usable_battery_capacity_kwh||""),String(n.battery_capacity_kwh||""));o=String(c||"")}return a?.max_power?l=a.max_power:l=Ti(n.max_power_hp,n.max_power_kw),{options:r?.options||[],keys:r?.keys||[],capacity:o,maxPower:l}},[n,e,t])},Jn=(e,t,n)=>{const s=`${n}_${e}`;return t[s]},no=()=>{const{t:e,i18n:t}=_e(),{selectedVehicle:n,savingsData:s,address:r}=te(),{provider:a}=Q();if(!n||!s)return console.error("No selected vehicle"),null;const{distanceUnit:o}=s,l=Number(Jn(o,n,"battery_warranty_distance")??0),c=Number(Ye((Number(n?.battery_warranty_months)??0)/12,0)),d=[];l>0&&(l>=999999?d.push(e(`ev_attributes.battery_range.unlimited_${o}`)):d.push(`${Ye(l)} ${o}`)),c>0&&d.push(`${c} ${e("ev_attributes.battery_range.years")}`);const p=typeof n?.new_used=="string"?n?.new_used?.toLowerCase():"",_=l&&n?.mileage&&p!=="new"?l-Number(n?.mileage):void 0,f=_&&l<999999?`${Ye(_<0?0:_)} ${o} ${e("ev_attributes.battery_range.warranty_remaining")}`:void 0,m=d.length>0&&(p==="new"||f),C=qs(t,o),{options:u=[],keys:v=[]}=C||{},g=u.some(b=>!!b.name),E=Y(()=>rs({rangeMi:Number(n.range_mi||0),rangeKm:Number(n.range_km||0),electricRangeMi:Number(n.electric_range_mi||0),electricRangeKm:Number(n.electric_range_km||0),combinedRangeMi:Number(n.combined_range_mi||0),combinedRangeKm:Number(n.combined_range_km||0),powertrain:n.powertrain,batteryCapacityKwh:Number(n.battery_capacity_kwh),usableBatteryCapacityKwh:Number(n.usable_battery_capacity_kwh),combinedKwh100Mi:Number(n.combined_kwh_100_mi),maxPowerHp:n.max_power_hp,maxPowerKw:n.max_power_kw},{distanceUnit:o,dealerName:"",translationNamespace:"",country:r?.country??"CA"},e,t).filter(b=>b.type==="battery"),[n,o,r,e,t]),w=E.filter(b=>b.key==="range"||b.key==="electric_range"||b.key==="combined_range");return i("div",{className:"lf-flex-1",children:[i(jt,{name:"battery",children:e("ev_attributes.battery_range.title")}),i("div",{className:`lf-grid lf-w-full lf-gap-6 lf-grid-cols-2 ${We(a).cardUtils.getAttributesInnerCardClass()}`,children:[w.filter(b=>{const y=b.key==="range"?"range":b.key==="electric_range"?"electric_range":"combined_range",S=Jn(o,n,y);return Number(S)>0}).map(b=>{const y=g&&v.includes("range"),S=Ri(b,C,v,"",e);return i(Ze,{title:e(b.title),value:S,icon:i(Xe,{iconType:b.iconType}),superscript:y?"1":void 0},b.key)}),E.filter(b=>b.key!=="range"&&b.key!=="electric_range"&&b.key!=="combined_range").map(b=>i(Ze,{title:b.title,value:typeof b.value=="string"?b.value:String(b.value),icon:i(Xe,{iconType:b.iconType}),superscript:g&&v.includes(b.key==="battery"?"capacity_kwh":b.key)?"1":void 0},b.key)),m&&i(Ze,{className:"lf-col-span-2 md:lf-col-span-1",title:e("ev_attributes.battery_range.warranty"),value:d.join(" / "),icon:i(Xe,{iconType:"warranty"}),subtitle:f})]}),i(os,{batteryOptions:u,batteryOptionsKeys:v,attributeKeys:["range","capacity_kwh","efficiency","max_power"]})]})},so=()=>{const{i18n:e,t}=_e(),{selectedVehicle:n,savingsData:s,address:r}=te(),{name:a,provider:o,measurement:l}=Q(),c=s?.distanceUnit??ss(l),d=Be();if(!n)return null;const p=Y(()=>rs({teslaNetworkAvailability:n.tesla_network_availability,physicalConnectorTypes:n.physical_connector_types,chargingConnectorTypes:n.charging_connector_types,chargingDurationHoursL2:Number(n.charging_duration_hours_l2),chargingDurationHoursL3:Number(n.charging_duration_hours_l3),chargingPercentStartL2:Number(n.charging_percent_start_l2),chargingPercentStartL3:Number(n.charging_percent_start_l3),chargingPercentEndL2:Number(n.charging_percent_end_l2),chargingPercentEndL3:Number(n.charging_percent_end_l3),maxChargePowerKw:Number(n.max_charge_power_kw),vehicleToHome:n.vehicle_to_home,vehicleToLoad:n.vehicle_to_load,vehicleToGrid:n.vehicle_to_grid,make:n.make,freeCharging:n.free_charging},{distanceUnit:c,dealerName:a,translationNamespace:"",country:r?.country??"CA"},t,e).filter(v=>v.type==="charging"),[n,c,a,r,t,e]),_=qs(e,c),{options:f=[],keys:m=[]}=_||{},C=f.some(v=>!!v.name),u=v=>{if(v.key.startsWith("charge_time_")){const g=parseInt(v.key.split("_").pop()||"0"),E=v.title.lastIndexOf(" "),w=E>0?v.title.substring(0,E):v.title,b=E>0?v.title.substring(E+1):"",y=b.length>0,S=C&&g===2&&(m.includes("charge_time")||m.includes("l2_charge_time"));return i(Ze,{title:i("div",{children:[i("div",{children:w}),y&&i("div",{children:b})]}),value:v.value,icon:i(Xe,{iconType:v.iconType}),superscript:S?"1":void 0},v.key)}if(v.key==="tesla_support")return i(Ze,{title:d?t("ev_attributes.charging.tesla_support_mobile"):v.title,value:v.value,tooltipText:v.tooltipText,icon:i(Xe,{iconType:v.iconType})},v.key);if(v.key==="max_charge_speed")return i(Ze,{title:v.title,value:v.value,icon:i(Xe,{iconType:v.iconType}),superscript:C&&m.includes("charge_power")?"1":void 0},v.key);if(v.key==="bidirectional_charge"){const g=v.value.split(", ");return i(Ze,{title:v.title,value:i("div",{children:g.map(E=>i("div",{children:E},E))}),icon:i(Xe,{iconType:v.iconType}),tooltipText:v.tooltipText},v.key)}return i(Ze,{title:v.title,value:v.value,icon:i(Xe,{iconType:v.iconType}),tooltipText:v.tooltipText},v.key)};return i("div",{className:"lf-flex-1",children:[i(jt,{name:"charging",children:t("ev_attributes.charging.title")}),i("div",{className:`lf-grid lf-w-full lf-gap-6 lf-grid-cols-2 ${We(o).cardUtils.getAttributesInnerCardClass()}`,children:p.map(u)}),i(os,{batteryOptions:f,batteryOptionsKeys:m,attributeKeys:["charge_time","charge_power"]})]})},io=()=>{const{isLoadingAttributes:e,hasVehicleSavingsError:t,savingsData:n}=te(),[s,r]=T(!1);return x(()=>{t&&r(!0)},[t]),s?null:i(ft,{name:"battery",children:i(at,{cardType:"battery",isLoading:e||!n,children:i(Ys,{children:i(no,{})})})})},ao=()=>{const{isLoadingAttributes:e,hasAttributesError:t}=te(),[n,s]=T(!1);return x(()=>{t&&s(!0)},[t]),n?null:i(ft,{name:"charging",children:i(at,{cardType:"charging",isLoading:e,children:i(Ys,{children:i(so,{})})})})},ro=()=>{const{flags:e}=we(),{foundVehicle:t}=te(),n=!e?.[ie.VEHICLE_SAVINGS]?.enabled||e?.[ie.VEHICLE_SAVINGS]?.enabled&&e?.[ie.VEHICLE_SAVINGS]?.value===Te.HIDE,s=e?.[ie.VEHICLE_SAVINGS_ON_NEW_VEHICLES]?.enabled&&e?.[ie.VEHICLE_SAVINGS_ON_NEW_VEHICLES]?.value===Te.HIDE;return!(n||s&&t?.new_used==="new")},oo=()=>{const{flags:e}=we();return e?.[ie.EV_EXPERT]?.enabled&&e?.[ie.EV_EXPERT]?.value===Te.SHOW},lo=e=>B("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("g",{id:"Frame"},B("g",{id:"Group 40106"},B("path",{id:"Vector",d:"M15.7839 6.2084C16.1364 5.856 16.3345 5.378 16.3345 4.87957C16.3346 4.38114 16.1367 3.9031 15.7843 3.55061C15.4319 3.19812 14.9539 3.00006 14.4554 3C13.957 2.99994 13.479 3.19788 13.1265 3.55028L4.22874 12.45C4.07395 12.6043 3.95947 12.7944 3.89539 13.0034L3.01469 15.9048C2.99746 15.9625 2.99616 16.0237 3.01092 16.0821C3.02569 16.1404 3.05597 16.1937 3.09856 16.2362C3.14114 16.2787 3.19444 16.3089 3.25281 16.3236C3.31117 16.3382 3.37241 16.3368 3.43004 16.3195L6.33217 15.4395C6.54096 15.376 6.73097 15.2622 6.88553 15.1081L15.7839 6.2084Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),B("path",{id:"Vector_2",d:"M11.6683 5.00031L14.3351 7.66709",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))),an=({country:e,make:t,model:n,year:s,trim:r})=>{const a=s&&e?bt(`${Ee().VEHICLE}/${e}/vehicle/search`,{make:t,model:n,year:s,trim:r}):null,{data:o,error:l,isLoading:c}=Re(a,a?()=>he(a):null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1,dedupingInterval:1e3*60*60*24});return{data:o,isLoading:c,isError:l}},co=()=>{const e=new Date().getFullYear();return Array.from({length:15},(t,n)=>String(e+1-n))},uo=({setIsOpen:e})=>{const{t}=_e(),{comparisonVehicle:n,setComparisonVehicle:s,setComparisonEfficiency:r,selectedVehicle:a}=te(),o=Q(),l=ye(),c=o?.address?.country||"",[d,p]=T([]),[_,f]=T([]),[m,C]=T([]),[u,v]=T(new Date().getFullYear().toString()),[g,E]=T(),[w,b]=T(),[y,S]=T();x(()=>{if(n){const A=n;v(String(A.year||"")),E(String(A.make||"")),b(String(A.model||"")),S(String(A.version_name||""))}},[n]);const{data:h,isLoading:N}=an({country:c,year:u}),{data:O,isLoading:P}=an({country:c,year:u,make:g}),{data:R,isLoading:q}=an({country:c,year:u,make:g,model:w});Qe(()=>{if(!h?.data?.makes||h?.data?.makes.length===0)return;const A=h?.data?.makes?.sort((ae,re)=>ae.localeCompare(re))??[];p(A),A.length===1?E(A[0]):(A.length===0||g&&!A.includes(g))&&(E(void 0),b(void 0),S(void 0))},[h]),Qe(()=>{if(!O?.data?.models||O?.data?.models.length===0)return;const A=O?.data?.models?.sort((ae,re)=>ae.localeCompare(re))??[];f(A),A.length===1?b(A[0]):(A.length===0||w&&!A.includes(w))&&(b(void 0),S(void 0))},[O]),Qe(()=>{if(!R?.data?.trims||R?.data?.trims.length===0)return;const A=R?.data?.trims?.sort((ae,re)=>ae.localeCompare(re))??[];C(A),A.length===1?S(A[0]):A.length===0&&S(void 0),y&&!A.includes(y)&&S(A[0])},[R]);const I=A=>{v(A),l({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{event_action:"click",event_action_result:"calc",element_type:"popup",element_subtype:"input",product_name:D.SavingsHub,element_text:t("vehicle_savings.comparison.year")},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.YEAR_SELECT})},M=A=>{A!==g&&(E(A),b(void 0),S(void 0),l({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{event_action:"click",event_action_result:"calc",element_type:"popup",element_subtype:"input",product_name:D.SavingsHub,element_text:t("vehicle_savings.comparison.make")},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.MAKE_SELECT}))},H=A=>{A!==w&&(b(A),S(void 0),l({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{event_action:"click",event_action_result:"calc",element_type:"popup",element_subtype:"input",product_name:D.SavingsHub,element_text:t("vehicle_savings.comparison.model")},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.MODEL_SELECT}))},F=A=>{A!==y&&(S(A),l({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{event_action:"click",event_action_result:"calc",element_type:"popup",element_subtype:"input",product_name:D.SavingsHub,element_text:t("vehicle_savings.comparison.trim")},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.TRIM_SELECT}))},se=Y(()=>!R?.data?.vehicles||!y?null:R.data.vehicles.find(A=>A.version_name===y),[R,y]),pe=u&&g&&w&&y,le=Y(()=>!se||!pe||se?.vehicle_id===n?.vehicle_id,[se,pe,n]),Se=N||P||q,de=()=>{if(se){const A=a,ae=A?.make||"",re=A?.model||"";Et(`lf-comparison-vehicle-${ae}-${re}`,se,60*24*7),r(""),s(se),e(!1),l({eventName:J.ASC_CTA_INTERACTION,parameters:{event_action:"click",event_action_result:"calc",element_type:"popup",element_subtype:"cta_button",product_name:D.SavingsHub,element_text:t("vehicle_savings.save")},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.SAVE})}};return i("div",{className:"lf-relative lf-w-full lf-space-y-3 md:lf-w-[248px]",children:[i(L,{size:"3",className:"lf-font-bold",children:t("vehicle_savings.comparison.choose_gas")}),i(St,{options:It(co()),label:t("vehicle_savings.comparison.year"),onSelect:I,selectedKey:u}),i(St,{options:It(d),label:t("vehicle_savings.comparison.make"),onSelect:M,selectedKey:g,placeholder:t("vehicle_savings.comparison.select_make"),isLoading:N}),i(St,{options:It(_),label:t("vehicle_savings.comparison.model"),onSelect:H,selectedKey:w,placeholder:t("vehicle_savings.comparison.select_model"),isLoading:P}),i(St,{options:It(m),label:t("vehicle_savings.comparison.trim"),onSelect:F,selectedKey:y,placeholder:t("vehicle_savings.comparison.select_trim"),isLoading:q}),!se&&pe&&!Se&&i(L,{as:"div",size:"2",className:"lf-text-center lf-text-[var(--red-11)]",children:t("vehicle_savings.comparison.unable_to_find")}),i(it,{disabled:le||Se,className:"lf-w-full lf-styled-button",onClick:de,children:t("vehicle_savings.save")})]})},Qn=({isModal:e})=>{const{t}=_e(),{comparisonVehicle:n}=te(),[s,r]=T(!1),a=ye();x(()=>{window.lfSetTimeout&&window.setTimeout!==window.lfSetTimeout&&(window.setTimeout=window.lfSetTimeout)},[s]);const o=Y(()=>n?`${n.year} ${n.make} ${n.model}`.trim():"",[n]);if(!n)return null;const l=()=>{a({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:D.SavingsHub,element_text:`${t("vehicle_savings.comparison.button")} ${o}`,element_state:"active",element_title:"",element_value:""},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.CTA_CLICK})},c=d=>{r(d),d||a({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{event_action:"click",event_action_result:"popup",element_type:"body",element_subtype:"cta_button",product_name:D.SavingsHub,element_title:t("vehicle_savings.comparison.button"),element_text:o,element_state:"inactive",element_value:""},eventId:j.VDP.VEHICLE_SAVINGS.COMPARISON_SELECTOR.CLOSE})};return i(ut,{className:"lf-w-full",trigger:i(lt,{className:"lf-h-[56px] lf-w-full lf-justify-between lf-gap-0 lf-p-4",onClick:l,children:[i("div",{className:"lf-flex-1 lf-text-left",children:[i(L,{as:"div",size:"2",className:"lf-mb-0",children:t("vehicle_savings.comparison.button")}),i(L,{as:"div",size:"3",className:"lf-line-clamp-1 lf-overflow-hidden lf-text-ellipsis lf-font-medium",children:o})]}),i(lo,{})]}),isOpen:s,title:t("vehicle_savings.comparison.choose_gas"),setIsOpen:c,isModal:e,children:i(uo,{setIsOpen:r})})},fo=()=>{const{t:e}=_e(),{vehicleData:t,incentives:n,incentiveData:s,setIncentives:r,savingsData:a,widgets:{vehicleSavings:{hideIncentives:o}},setOpenModal:l}=te(),{flags:c}=we(),d=c?.[ie.INCENTIVES_OPEN]?.enabled&&c?.[ie.INCENTIVES_OPEN]?.value===Te.SHOW,p=ye(),_=Q(),{currency:f,name:m}=_;if(!t?.data||o)return null;const C=(s.data?.data??[]).filter(sa),u=or(C.filter(I=>!I.not_applicable)),v=u.length,g=u.filter(I=>I.max_value>0).slice(0,5),E=u.filter(I=>!g.includes(I)),w=a?.savings.incentives.total??0,b=(I,M)=>{r(I?[...n,M]:n.filter(H=>H.id!==M.id))},y=n.length,S=y>0?"vehicle_savings.incentives.selected":"vehicle_savings.incentives.available";if(!s.isLoading&&u.length===0)return null;const h=E.length,N=E.length===0||g.length===0?e("vehicle_savings.view_details"):e("vehicle_savings.view_all_incentives"),O=I=>{p({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"content",event_action:"click",event_action_result:"open",product_name:D.SavingsHub,element_state:I?"active":"inactive",element_title:"Incentives List",element_text:"",element_value:""},eventId:I?j.VDP.VEHICLE_SAVINGS.INCENTIVES.COLLAPSIBLE.OPEN:j.VDP.VEHICLE_SAVINGS.INCENTIVES.COLLAPSIBLE.CLOSE})},P=I=>{I&&p({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"hover",event_action_result:"open",product_name:D.SavingsHub,element_state:"inactive",element_title:"Incentives Tooltip",element_text:e("vehicle_savings.incentives.tooltip",{name:m}),element_value:""},eventId:j.VDP.VEHICLE_SAVINGS.INCENTIVES.TOOLTIP.OPEN})},R=(I,M)=>{b(I,M),p({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"toggle",event_action:"click",event_action_result:"calc",product_name:D.SavingsHub,element_state:I?"active":"inactive",element_title:M.title,element_text:"",element_value:M.id},eventId:I?j.VDP.VEHICLE_SAVINGS.INCENTIVES.SELECTED:j.VDP.VEHICLE_SAVINGS.INCENTIVES.UNSELECTED})},q=()=>{l(D.IncentiveHub),p({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:D.SavingsHub,element_text:N},eventId:j.VDP.VEHICLE_SAVINGS.INCENTIVES.CTA_OPEN})};return i(ls,{triggerClassName:"lf-p-4",isLoading:s.isLoading&&u.length===0,hideToggle:v===0,title:"Incentives List",onOpenChange:O,toggle:i("div",{className:"lf-flex lf-w-full lf-items-center lf-justify-between lf-space-x-2",children:[i(L,{as:"div",size:"3",className:"lf-text-default lf-flex lf-items-center lf-font-medium lf-text-left",children:[e(S,{selectedIncentives:y,totalIncentives:v}),i(ut,{className:"lf-ml-1",title:"Incentives Tooltip",toggle:"hover",onOpenChange:P,children:i(L,{as:"div",size:"2",className:"lf-w-full lf-pt-10 md:lf-w-[200px] md:lf-pt-0",children:e("vehicle_savings.incentives.tooltip",{name:m})})})]}),w>0&&i(L,{as:"div",size:"3",className:"lf-font-bold",children:e("vehicle_savings.incentives.up_to",{value:Ae(w,f)})})]}),defaultOpen:d,children:i("div",{className:"lf-mt-4 lf-flex lf-flex-col lf-space-y-2",children:[g.map(I=>{const M=n.find(H=>H.id===I.id);return i(xi,{ariaLabel:I.title,className:"lf-flex-1 lf-items-center",isChecked:!!M,onChange:H=>R(H,I),children:i(Ce,{children:[i(L,{size:"2",className:"lf-line-clamp-2 lf-flex-1 lf-text-left",children:I.title}),i(L,{as:"div",size:"2",className:"lf-text-default",children:e("vehicle_savings.incentives.up_to",{value:Ae(I.max_value,f)})})]})},I.id)}),E.length>0&&g.length>0&&i(L,{as:"div",size:"2",className:"lf-text-default lf-pb-1",children:e("vehicle_savings.incentives.non_monetary",{count:h})}),E.length>0&&g.length===0&&E.map(I=>i("div",{className:"lf-flex lf-w-full",children:[i(L,{size:"2",className:"lf-line-clamp-2 lf-flex-1 lf-text-left",children:I.title}),I.max_value>0&&i(L,{as:"div",size:"2",className:"lf-text-default",children:e("vehicle_savings.incentives.up_to",{value:Ae(I.max_value,f)})})]},I.id)),i(lt,{className:"lf-mx-0 lf-w-full lf-styled-button",onClick:q,children:N})]})})},_o=()=>{const{years:e,savingsData:t,comparisonVehicle:n,selectedVehicle:s}=te(),{t:r}=_e(),{currency:a}=Q();if(!t||!n||!s)return null;const{electricity:o,gas:l,selectedVehicle:{ownership:{total:c},costPer:d,formattedEfficiency:p},comparisonVehicle:{ownership:{total:_},costPer:f,formattedEfficiency:m},savings:{ownership:{total:C}},distanceUnit:u,totalDistance:v,efficiencyComparison:g}=t,E=Pi(v);return i("div",{className:"lf-w-full md:lf-w-[370px]",children:[i(L,{size:"3",as:"div",className:"lf-mb-4 lf-font-bold",children:r("vehicle_savings.ownership_savings.tooltip_title")}),i("div",{className:"lf-text-gray lf-grid lf-grid-cols-3 lf-gap-y-2",children:[i("div",{}),i(L,{size:"2",as:"div",className:"lf-text-gray-11 lf-pr-2 lf-font-medium",children:Vn(s)}),i(L,{size:"2",as:"div",className:"lf-text-gray-11 lf-pr-2 lf-font-medium",children:Vn(n)}),i(L,{size:"2",as:"div",className:"lf-text-gray-11 lf-border-b lf-py-2 lf-pr-2",children:r("vehicle_savings.ownership_savings.fuel_cost")}),i(L,{size:"2",className:"lf-border-b lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:o.formattedCost}),i(L,{size:"2",className:"lf-border-b lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:l.formattedCost}),i(L,{size:"2",as:"div",className:"lf-text-gray-11 lf-border-b lf-py-2 lf-pr-2",children:r("vehicle_savings.ownership_savings.fuel_efficiency",{distanceUnit:u})}),i(L,{size:"2",className:"lf-border-b lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:p}),i(L,{size:"2",className:"lf-border-b lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:m}),i(L,{size:"2",as:"div",className:"lf-text-gray-11 lf-py-2 lf-pr-2",children:r("vehicle_savings.ownership_savings.cost_to_drive",{distance:E,distanceUnit:u})}),i(L,{size:"2",className:"lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:Ae(c,a)}),i(L,{size:"2",className:"lf-py-2 lf-pr-2 lf-font-medium",as:"span",children:Ae(_,a)})]}),i("div",{className:"lf-grid lf-w-full lf-grid-cols-3 lf-gap-2 lf-font-medium",children:[i("div",{className:"lf-col-span-2 lf-col-start-2 lf-text-white",children:i(L,{size:"3",as:"div",className:"lf-bg-gray-11 lf-default-radius lf-flex lf-items-end lf-justify-center lf-p-2 lf-font-medium",children:[i(L,{size:"6",className:"lf-mr-2 lf-font-bold",children:[Ye(g,1),"x"]}),r("vehicle_savings.ownership_savings.less_expensive")]})}),i(st,{asChild:!0,variant:"ghost",size:1,children:i("div",{className:"lf-bg-accent-9 lf-text-contrast lf-m-0 lf-flex-1 lf-p-2",children:[i(L,{size:"5",className:"lf-pb-2",as:"div",children:Ae(C,a)}),i(L,{size:"2",as:"div",children:r("vehicle_savings.ownership_savings.savings_over",{years:e})})]})}),i(st,{asChild:!0,variant:"ghost",size:1,children:i("div",{className:"lf-bg-gray-2 lf-m-0 lf-flex-1 lf-p-2",children:[i(L,{size:"5",className:"lf-pb-2",as:"div",children:Ae(d,a,3)}),i(L,{size:"2",as:"div",children:r("vehicle_savings.ownership_savings.cost_per_distance",{distanceUnit:u,model:s?.model})})]})}),i(st,{asChild:!0,variant:"ghost",size:1,children:i("div",{className:"lf-bg-gray-2 lf-m-0 lf-flex-1 lf-p-2",children:[i(L,{size:"5",className:"lf-pb-2",as:"div",children:Ae(f,a,3)}),i(L,{size:"2",as:"div",children:r("vehicle_savings.ownership_savings.cost_per_distance",{distanceUnit:u,model:n?.model})})]})})]})]})},po=()=>{const{savingsData:e,timeline:t,setOpenModal:n}=te(),s=Q(),{currency:r}=s,{t:a}=_e(),o=ye();if(!e)return console.error("No savings data"),null;const{fuelSavings:l,maintenanceSavings:c,totalSavings:d,suffix:p}=Y(()=>{const{savings:{fuel:{monthly:u,annual:v,total:g},maintenance:{monthly:E,annual:w,total:b},ownership:{monthly:y,annual:S,total:h}}}=e;let N=0,O=0,P=0;t==="monthly"?(N=u,O=E,P=y):t==="annual"?(N=v,O=w,P=S):(N=g,O=b,P=h);const R=a(`vehicle_savings.suffix.${t}`);return{fuelSavings:N,maintenanceSavings:O,totalSavings:P,suffix:R}},[t,e,a]),_=D.SavingsHub,f=u=>{o({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"hover",event_action_result:u?"open":"close",product_name:_,element_state:u?"inactive":"active",element_title:a("vehicle_savings.ownership_savings.title"),element_text:"tooltip",element_value:""},eventId:u?j.VDP.OWNERSHIP.COLLAPSIBLE.OPEN:j.VDP.OWNERSHIP.COLLAPSIBLE.CLOSE})},m=u=>{u&&o({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"hover",event_action_result:"open",product_name:_,element_state:"inactive",element_title:a("vehicle_savings.ownership_savings.tooltip_title"),element_text:"tooltip",element_value:""},eventId:j.VDP.OWNERSHIP.TOOLTIP.OPEN})},C=()=>{n(D.OwnershipHub),o({eventName:J.ASC_CTA_INTERACTION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:"SavingsHub",element_text:a("vehicle_savings.personalize_savings")},eventId:j.VDP.OWNERSHIP.CTA_OPEN})};return i("div",{className:"lf-space-y-2",children:i(ls,{triggerClassName:"lf-p-4",defaultOpen:!0,toggle:i("div",{className:"lf-text-default lf-flex lf-w-full lf-items-center lf-justify-between lf-space-x-2",children:[i(L,{as:"div",size:"3",className:"lf-font-medium lf-text-left",children:a("vehicle_savings.ownership_savings.title")}),i(L,{as:"div",size:"3",className:"lf-font-bold",children:[Ae(d,r),p]})]}),title:a("vehicle_savings.ownership_savings.title"),onOpenChange:f,children:i("div",{className:"lf-mt-4 lf-space-y-2",children:[i("div",{className:"lf-flex lf-justify-between",children:[i("div",{className:"lf-flex lf-items-center",children:[i(L,{as:"div",size:"2",className:"lf-mr-1",children:a("vehicle_savings.ownership_savings.gas_savings")}),i(ut,{title:a("vehicle_savings.ownership_savings.tooltip_title"),onOpenChange:m,children:i(_o,{})})]}),i(L,{as:"div",size:"2",children:[Ae(l,r),p]})]}),i("div",{className:"lf-flex lf-justify-between",children:[i(L,{as:"div",size:"2",children:a("vehicle_savings.maintenance_savings")}),i(L,{as:"div",size:"2",children:[Ae(c,r),p]})]}),i(lt,{className:"lf-w-full lf-styled-button",onClick:C,children:a("vehicle_savings.personalize_savings")})]})})})},go=e=>B("svg",{width:18,height:2,viewBox:"0 0 18 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("path",{d:"M16.7 1H1.29999",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),mo=e=>B("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("path",{d:"M16.7 9H1.29999M8.99999 16.7V1.3",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),vo=()=>{const{years:e,setYears:t}=te(),{t:n}=_e(),s=ye(),r=()=>{t(e-1),s({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"decrease",product_name:D.SavingsHub,element_state:"active",element_title:"decrease",element_value:`${e-1}`,element_text:"decrease"},eventId:j.VDP.VEHICLE_SAVINGS.OWNERSHIP_YEARS.DECREASE})},a=()=>{t(e+1),s({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"increase",product_name:D.SavingsHub,element_state:"active",element_title:"increase",element_value:`${e+1}`,element_text:"increase"},eventId:j.VDP.VEHICLE_SAVINGS.OWNERSHIP_YEARS.INCREASE})};return i("div",{className:"lf-flex lf-items-center lf-justify-between",children:[i(L,{as:"div",size:"3",className:"lf-pr-2",children:n("vehicle_savings.years_of_ownership")}),i("div",{className:"lf-flex lf-items-center",children:[i(Mn,{ariaLabel:n("vehicle_savings.decrease_to",{years:e-1}),size:"2",disabled:e<=Ls,onClick:r,className:"lf-flex lf-size-[32px] lf-items-center lf-justify-center lf-p-0",children:i(go,{width:15})}),i(L,{as:"div",className:"lf-w-10 lf-text-center",size:"3",children:e}),i(Mn,{ariaLabel:n("vehicle_savings.increase_to",{years:e+1}),size:"2",disabled:e>=As,className:"lf-flex lf-size-[32px] lf-items-center lf-justify-center lf-p-0",onClick:a,children:i(mo,{width:15})})]})]})},rn=new Map,ho=(e,t)=>{const[n,s]=T(e);return x(()=>{const r=window.setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),n};function Eo(e){if(!e||e.length===0)return Y(()=>({data:null,isLoading:!1,isError:!0}),[]);const t=An(e),n=Ln(e),r=t||n?`${Ee().CONFIGURATION}/address/${e}`:null;if(rn.has(e))return Y(()=>({data:rn.get(e),isLoading:!1,isError:!1}),[e]);const{data:a,error:o,isLoading:l}=Re(r,r?async()=>{const c=await he(r);return rn.set(e,c.data),c}:null,{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});return Y(()=>({data:a,isLoading:l,isError:!!o}),[a,o,l])}function Fo(e,t=500){const n=bt(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json`,{access_token:"pk.eyJ1IjoiamVyZW15amFjcXVlcyIsImEiOiJjbTloeTM2amUwYTZxMmpxNHF4enFldmtjIn0.xEzmv5SXwg3E8l1l0H9ZnQ",limit:"5",autocomplete:"true",types:"address,place,locality",country:"us,ca",language:Wt.language}),s=ho(n,t),r=s&&s!==""?n:null,{data:a,error:o,isLoading:l}=Re(r,async()=>{if(!r)return null;try{const c=await fetch(r);if(!c.ok)throw new Error("Failed to fetch address data");return c.json()}catch(c){throw console.error("Address autocomplete fetch error:",c),c}},{keepPreviousData:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,shouldRetryOnError:!1});return Y(()=>({data:a,isLoading:l,isError:!!o}),[a,o,l])}const yo=({productName:e,className:t,isModal:n})=>{const{address:s,setAddress:r}=te(),{city:a,state:o,country:l,zipCode:c}=s||{},{t:d}=_e(),[p,_]=T({city:a,state:o,zipCode:nn(c?.toLocaleUpperCase(),l),country:l}),f=ye(),[m,C]=T(!1),{data:u,isError:v,isLoading:g}=Eo(p.zipCode);x(()=>{if(u){const H={city:u.locality,state:u.state_code,country:u.country_code};_(F=>({...F,...H}))}},[u]);const E=!er(p.zipCode,l)||v||g,w=H=>{_(F=>({...F,zipCode:H}))},{country:b,city:y,state:S,zipCode:h}=p,N=H=>{const F=nn(H,l);F!==h&&w(F)},O=y&&S?`${y}, ${S}`:null,P=a&&o?`${a}, ${o}`:null,R=b?.toLocaleLowerCase(),q=`${P?`${P},`:""} ${nn(c,l)}`,I=H=>{C(H),H&&f({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"cta_button",event_action:"click",event_action_result:"open",product_name:e,element_state:"inactive",element_title:d(`vehicle_savings.ownership_savings.enter_zip_${R}`),element_text:q,element_value:""},eventId:j.VDP.VEHICLE_SAVINGS.ZIP.OPEN})},M=H=>{H.preventDefault(),f({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"popup",element_subtype:"cta_button",event_action:"click",event_action_result:"calc",product_name:e,element_text:d("vehicle_savings.save"),element_value:"",element_title:"",element_state:"active"},eventId:j.VDP.VEHICLE_SAVINGS.ZIP.SAVE}),r(p),I(!1)};return i(ut,{className:t,trigger:i(L,{size:"2",className:"lf-link-gray lf-m-0 lf-cursor-pointer lf-border-none lf-bg-transparent lf-p-0 lf-font-medium lf-underline hover:lf-no-underline",children:q}),isOpen:m,setIsOpen:I,title:d(`vehicle_savings.ownership_savings.enter_zip_${R}`),isModal:n,children:i(ki,{onSubmit:M,handleInputChange:N,isError:v,zipCode:h,cityState:O||"",isLoading:g,disabled:E,titleText:d(`vehicle_savings.ownership_savings.enter_zip_${R}`),errorText:d(`vehicle_savings.ownership_savings.zip_error_${R}`),submitText:d("vehicle_savings.save")})})},bo=()=>{const{t:e}=_e(),{widgets:{vehicleSavings:t}}=te();return i("div",{className:"lf-flex lf-flex-col lf-text-left lf-w-full",children:[i(jt,{name:"vehicleSavings",type:t.type,children:e("vehicle_savings.estimated_savings")}),i(yo,{productName:D.SavingsHub,className:"lf-w-fit"})]})},No=e=>B("svg",{width:42,height:30,viewBox:"12 10 30 34",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B("path",{d:"M9.98009 42.625H6.875C6.11561 42.625 5.5 42.0094 5.5 41.25M9.98009 42.625C14.7646 42.625 19.5286 42.0007 24.1515 40.7679L30.8485 38.9821C35.4714 37.7493 40.2354 37.125 45.0199 37.125M9.98009 42.625C10.7683 42.625 11.556 42.608 12.3426 42.5743C12.3641 42.3649 12.375 42.1525 12.375 41.9375C12.375 38.5202 9.60479 35.75 6.1875 35.75C5.95512 35.75 5.72573 35.7628 5.5 35.7877L5.5 41.25M5.5 41.25L5.5 19.25M45.0199 37.125H48.125C48.8844 37.125 49.5 36.5094 49.5 35.75M45.0199 37.125C44.2354 37.125 43.4514 37.1418 42.6685 37.1753C42.6398 36.9334 42.625 36.6871 42.625 36.4375C42.625 33.0202 45.3952 30.25 48.8125 30.25C49.0449 30.25 49.2743 30.2628 49.5 30.2877V35.75M9.98009 17.875H6.875C6.11561 17.875 5.5 18.4906 5.5 19.25M9.98009 17.875C14.7646 17.875 19.5286 17.2507 24.1515 16.0179L30.8485 14.2321C35.4714 12.9993 40.2354 12.375 45.0199 12.375M9.98009 17.875C10.7646 17.875 11.5486 17.8582 12.3315 17.8247C12.3602 18.0666 12.375 18.3129 12.375 18.5625C12.375 21.9798 9.60479 24.75 6.1875 24.75C5.95512 24.75 5.72573 24.7372 5.5 24.7123L5.5 19.25M45.0199 12.375L48.125 12.375C48.8844 12.375 49.5 12.9906 49.5 13.75M45.0199 12.375C44.2317 12.375 43.4439 12.3919 42.6574 12.4257C42.6359 12.6351 42.625 12.8475 42.625 13.0625C42.625 16.4798 45.3952 19.25 48.8125 19.25C49.0449 19.25 49.2743 19.2372 49.5 19.2123V13.75M49.5 35.75V13.75M22.2993 26.0124L22.2993 28.9876C22.2993 30.6506 23.0713 32.2193 24.3891 33.2338C26.3158 34.717 28.9997 34.717 30.9264 33.2338C32.2442 32.2193 33.0163 30.6506 33.0163 28.9876V26.0124C33.0163 24.3494 32.2442 22.7807 30.9264 21.7662C28.9997 20.283 26.3158 20.283 24.3891 21.7662C23.0713 22.7807 22.2993 24.3494 22.2993 26.0124ZM12.6513 29.7541V30.7459C12.6513 31.3002 12.9087 31.8231 13.3479 32.1612C13.9902 32.6556 14.8848 32.6556 15.527 32.1612C15.9663 31.8231 16.2237 31.3002 16.2237 30.7459V29.7541C16.2237 29.1998 15.9663 28.6769 15.527 28.3388C14.8848 27.8444 13.9902 27.8444 13.3479 28.3388C12.9087 28.6769 12.6513 29.1998 12.6513 29.7541ZM38.7763 24.2541V25.2459C38.7763 25.8002 39.0337 26.3231 39.4729 26.6612C40.1152 27.1556 41.0098 27.1556 41.652 26.6612C42.0913 26.3231 42.3487 25.8002 42.3487 25.2459V24.2541C42.3487 23.6998 42.0913 23.1769 41.652 22.8388C41.0098 22.3444 40.1152 22.3444 39.4729 22.8388C39.0337 23.1769 38.7763 23.6998 38.7763 24.2541Z",stroke:"currentColor",strokeWidth:1.1,strokeLinecap:"round",strokeLinejoin:"round"})),Co=()=>{const{flags:e}=we();return e?.[ie.ANIMATE_SAVINGS]?.enabled&&e?.[ie.ANIMATE_SAVINGS]?.value===Te.SHOW},wo=()=>{const{flags:e}=we();return e&&e?.[ie.CARBON_FOOTPRINT]?.value===Te.SHOW&&e?.[ie.CARBON_FOOTPRINT]?.enabled},So=[{id:vt.total},{id:vt.monthly},{id:vt.annual}],Io=({productName:e,type:t="all",variant:n})=>{const{t:s}=_e(),{savingsData:r,timeline:a,setTimeline:o,years:l}=te(),c=ye(),{currency:d}=Q(),{savings:p,carbon:_}=r??{},{burnUnit:f,totalCO2Savings:m,trees:C}=_??{},{monthly:u,annual:v,total:g}=p?.[t]??{monthly:0,annual:0,total:0},{fill:E}=Tn(),w=X(null),{value:b,subtitle:y,suffix:S}=Y(()=>{let F;switch(a){case"monthly":F=u;break;case"annual":F=v;break;default:F=g;break}return{value:F,suffix:s(`vehicle_savings.suffix.${a}`),subtitle:s(`vehicle_savings.${a}_savings`,{years:l,monthly_value:`${Ae(u,d)}${s("vehicle_savings.suffix.monthly")}`})}},[a,u,v,g,s]),h=n==="contrast",N=h?"lf-bg-accent-9 lf-text-contrast lf-p-2":"lf-bg-panel-default lf-text-default lf-p-0",O=h?i(No,{className:"!lf-ml-auto",width:48,height:32}):i(is,{fill:E,className:"!lf-ml-auto",width:48,height:48}),P=wo(),R=Co(),q=s("vehicle_savings.carbon_savings",{burnUnit:f,totalCO2Savings:Ye(m||0),trees:C}),I=F=>{o(F),c({eventName:J.ASC_ELEMENT_CONFIGURATION,parameters:{element_type:"body",element_subtype:"toggle",event_action:"click",event_action_result:"calc",product_name:e,element_title:"Timeline",element_text:F,element_state:"active",element_value:""},eventId:j.VDP.VEHICLE_SAVINGS.TIMELINE.SELECTED[F]})},M=Vi(w,{triggerOnce:!0}),H=Mi(Math.round(b),1e3,!R,M);return i("div",{children:[i(st,{asChild:!0,variant:"ghost",className:"lf-mb-3",size:"1",children:i("div",{className:`lf-relative lf-m-0 lf-space-y-3 ${N} lf-font-medium`,children:[i("div",{className:"lf-flex lf-items-center lf-space-x-2",children:[i(L,{as:"div",size:"9",ref:w,children:Ae(H,d)}),i(L,{as:"div",size:"6",className:"lf-pt-2",children:S}),O]}),i(L,{as:"div",size:"2",children:y}),i(Di,{className:"lf-flex-1",options:So.map(F=>F.id),selected:a,setSelected:F=>I(F),translationKey:"vehicle_savings",variant:n})]})}),P&&i(Gi,{text:q,fill:E})]})},es=()=>{const{t:e}=_e(),n=oo()?ke.EV_EXPERT:ke.REPORT;return i(Ce,{children:[i(Ut,{type:n,productName:D.SavingsHub,buttonText:e(`vehicle_savings.${n}.button`),triggerText:e(`vehicle_savings.${n}.trigger`)}),i(Bi,{productName:D.SavingsHub,poweredByText:e("shared:poweredBy"),disclaimerTitle:e("vehicle_savings.disclaimer.title"),disclaimerHeader:e("vehicle_savings.disclaimer.header"),disclaimerDescription:e("vehicle_savings.disclaimer.description")})]})},Oo=()=>{const{savingsData:e,isLoadingVehicleSavings:t,hasVehicleSavingsError:n,widgets:{vehicleSavings:s}}=te(),r=Be(),{provider:a}=Q();if(Us(),n||t&&(!e?.selectedVehicle?.efficiency||!e?.comparisonVehicle?.efficiency||!e?.savings?.all?.total))return null;const o=s.type===kt.LANDSCAPE,l=r||!o,c=l?"lf-flex-col":"md:lf-gap-6 md:lf-flex-row",d=l?"lf-w-full":"lf-w-[40%] lf-min-w-[310px] lf-max-w-[430px] lf-flex-shrink-0",p=l?"lf-w-full":"lf-w-[60%] lf-flex-1",_=We(a).cardUtils.getVehicleSavingsInnerCardClass();return i(Ce,{children:[i(bo,{}),i("div",{className:`lf-mt-3 lf-flex lf-flex-col lf-gap-3 ${c} ${_}`,children:[i("div",{className:`${d} lf-space-y-3`,children:[i(Io,{variant:"contrast",productName:D.SavingsHub}),i(vo,{}),l&&i(Qn,{}),!l&&i(es,{})]}),i("div",{className:`${p} lf-space-y-3`,children:[!l&&i(Qn,{}),i(po,{}),i(fo,{})]}),l&&i(es,{})]})]})},Ao=()=>{const{isLoadingVehicleSavings:e,hasVehicleSavingsError:t,widgets:{vehicleSavings:n}}=te(),s=ro(),[r,a]=T(!1);return x(()=>{t&&a(!0)},[t]),!s||r?null:i(ft,{name:"vehicleSavings",children:i(at,{cardType:"vehicleSavings",isLoading:e,type:n.type,children:i(Oo,{})})})},Lo=()=>{const{provider:e,widgets:t,id:n}=Q(),{flags:s}=we(),r=Be(),{groupedIncentives:a,openModal:o,setOpenModal:l,selectedVehicle:c,widgets:{vehicleSavings:{hideIncentives:d}}}=te(),p=Y(()=>{const _=u=>{switch(u){case z.VEHICLE_SAVINGS:return i(Ao,{});case z.BATTERY:return i(io,{});case z.CHARGING:return i(ao,{});case z.CHARGE_MAP:return i(to,{});case z.INCENTIVES_BANNER:return i(Yr,{});case z.BATTERY_REPORT_BADGE:return i(Jr,{});default:return null}};return(t?ps(t,e,r):[]).filter(u=>On.includes(u.name)).filter(u=>!!(u.enabled||window.__LYTEFLO_EXTENSION_ID__)).map(u=>_(u.name)).filter(u=>u!==null)},[e,t,r]);return!n||!s||Object.keys(s).length===0?null:i(Ce,{children:[p,i(ks,{showIncentives:!d&&Object.keys(a).some(_=>a[_].length>0),openModal:o,setOpenModal:l,selectedVehicle:c})]})},To=()=>{const[e,t]=T(null),{provider:n}=Q();return x(()=>{if(n){const s=Yi(n);if(s){const r=Object.fromEntries(Object.entries(s).map(([a,o])=>[a,typeof o=="number"?o.toString():o]));t(r)}}},[n]),i(bn,{fallback:null,children:i(Rs,{foundVehicle:e,setFoundVehicle:t,pageType:ge.VDP,children:i(Fs,{children:i(Lo,{})})})})};function Ks(){const{provider:e,widgets:t}=Q(),{isPending:n,pageType:s}=qi(e),r=Y(()=>!t?.length||!e||n||s===void 0?null:s===ge.SRP?ms(t)?kr:null:To,[n,s,t,e]);return r?i(za,{children:i(r,{})}):null}const vn=()=>{if(!document.getElementById(De.WIDGET)){const e=document.querySelector("body"),t=document.createElement("div");t.setAttribute("id",De.WIDGET),t.setAttribute("data-notranslate","true"),e?.appendChild(t),cs(i(Ks,{}),t)}};vn();window.addEventListener("message",e=>{if(e.data.type==="lf-load-widget"&&vn(),e.data.type==="lf-render-widget"){const t=document.getElementById(De.WIDGET);t?cs(i(Ks,{}),t):vn()}});export{uo as C,Go as D,j as E,ie as F,Ho as M,vo as O,Ut as P,Io as S,yo as Z,te as a,oo as b,ke as c,Tn as d,Fo as e,Ws as f,Mo as g,Hs as h,Do as i,Bo as j,$o as p,ye as u};
